<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>Rider Sign Up ‚Äî Var√≥n</title>
		<style>
			:root {
				--bg: #ffffff;
				--fg: #0a0a0a;
				--muted: #6b7280;
				--card: #ffffff;
				--line: #e5e7eb;
				--accent: #111827;
				--error: #ef4444;
				--success: #10b981;
			}
			
			html, body {
				height: 100%;
				margin: 0;
				font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
				color: var(--fg);
				background: #f9fafb;
				line-height: 1.5;
			}
			
			.layout {
				display: grid;
				grid-template-columns: 1fr 480px;
				min-height: 100vh;
				align-items: center;
				background: linear-gradient(135deg, #f3f4f6 0%, #ffffff 100%);
			}
			
			.left {
				padding: 64px 80px;
			}
			
			.brand {
				display: flex;
				align-items: center;
				gap: 14px;
				font-weight: 700;
				font-size: 22px;
				color: var(--accent);
			}
			
			.hero-title {
				font-size: 42px;
				color: var(--accent);
				margin: 24px 0 16px;
				line-height: 1.2;
			}
			
			.hero-sub {
				color: var(--muted);
				max-width: 520px;
				font-size: 16px;
				margin: 0;
			}
			
			.illustration {
				margin-top: 40px;
				max-width: 480px;
				border-radius: 16px;
				box-shadow: 0 20px 40px rgba(0,0,0,0.1);
			}

			.card-wrap {
				display: flex;
				justify-content: center;
				padding: 48px;
				background: #ffffff;
				height: 100%;
			}
			
			.card {
				width: 100%;
				max-width: 400px;
				background: var(--card);
				border-radius: 16px;
				box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.05);
				padding: 32px;
			}
			
			.card h2 {
				margin: 0 0 8px;
				font-size: 24px;
				color: var(--accent);
			}
			
			.sub {
				color: var(--muted);
				margin-bottom: 28px;
				font-size: 15px;
			}

			.form-group {
				margin-bottom: 20px;
			}
			
			.form-group label {
				display: block;
				font-size: 14px;
				font-weight: 500;
				color: var(--accent);
				margin-bottom: 8px;
			}
			
			.form-input, .form-select {
				width: 100%;
				padding: 12px 16px;
				border: 1px solid var(--line);
				border-radius: 8px;
				background: #fff;
				font-size: 15px;
				transition: all 0.2s;
				box-sizing: border-box;
			}
			
			.form-input:hover, .form-select:hover {
				border-color: #d1d5db;
			}
			
			.form-input:focus, .form-select:focus {
				outline: none;
				border-color: var(--accent);
				box-shadow: 0 0 0 2px rgba(17,24,39,0.1);
			}

			.form-select {
				appearance: none;
				background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
				background-repeat: no-repeat;
				background-position: right 12px center;
				background-size: 16px;
				padding-right: 40px;
			}

			.vehicle-options {
				display: grid;
				grid-template-columns: repeat(2, 1fr);
				gap: 12px;
				margin-bottom: 20px;
			}

			.vehicle-option {
				position: relative;
				cursor: pointer;
			}

			.vehicle-option input {
				position: absolute;
				opacity: 0;
				cursor: pointer;
				height: 0;
				width: 0;
			}

			.vehicle-option label {
				display: flex;
				flex-direction: column;
				align-items: center;
				gap: 8px;
				padding: 16px;
				border: 1px solid var(--line);
				border-radius: 8px;
				transition: all 0.2s;
			}

			.vehicle-option input:checked + label {
				border-color: var(--accent);
				background: rgba(17,24,39,0.05);
			}

			.vehicle-icon {
				font-size: 24px;
			}

			.tnc-row {
				display: flex;
				align-items: center;
				gap: 12px;
				margin: 24px 0;
			}
			
			.tnc-row input[type="checkbox"] {
				width: 18px;
				height: 18px;
				accent-color: var(--accent);
				border-radius: 4px;
				cursor: pointer;
			}
			
			.tnc-row label {
				font-size: 14px;
				color: var(--muted);
				cursor: pointer;
			}
			
			.tnc-row a {
				color: var(--accent);
				text-decoration: none;
				font-weight: 500;
			}
			
			.tnc-row a:hover {
				text-decoration: underline;
			}

			.btn {
				display: inline-block;
				width: 100%;
				padding: 14px;
				border-radius: 8px;
				border: 0;
				background: var(--accent);
				color: #fff;
				font-weight: 600;
				font-size: 15px;
				cursor: pointer;
				transition: all 0.2s;
			}
			
			.btn:hover {
				background: #000000;
				transform: translateY(-1px);
			}
			
			.btn:active {
				transform: translateY(0);
			}

			.small-note {
				font-size: 14px;
				color: var(--muted);
				margin-top: 20px;
				text-align: center;
			}
			
			.small-note a {
				color: var(--accent);
				text-decoration: none;
				font-weight: 500;
			}

			.alert {
				padding: 12px;
				margin-bottom: 20px;
				border-radius: 8px;
			}

			.alert-error {
				background: #fee2e2;
				color: #991b1b;
			}

			.alert-success {
				background: #dcfce7;
				color: #15803d;
			}

			.small-note a:hover {
				text-decoration: underline;
			}

			@media (max-width: 1024px) {
				.layout {
					grid-template-columns: 1fr;
				}
				
				.left {
					padding: 40px;
					text-align: center;
				}
				
				.hero-sub {
					margin: 0 auto;
				}
				
				.illustration {
					margin: 32px auto;
				}
				
				.card-wrap {
					padding: 32px 24px;
				}
			}
		</style>
	</head>
	<body>
		<div class="layout">
			<div class="left">
				<div class="brand"><img src="" alt="" style="width:34px;height:34px;border-radius:6px;background:#efefef"> Var√≥n Rider</div>
				<h1 class="hero-title">Become a Var√≥n Rider</h1>
				<p class="hero-sub">Join our delivery fleet and earn on your own schedule. Get paid to deliver packages and food to customers in your area.</p>
				<img class="illustration" alt="delivery illustration" src="https://images.unsplash.com/photo-1617347454431-f49d7ff5c3b1?q=80&w=800&auto=format&fit=crop" style="width:100%;height:320px;object-fit:cover">
			</div>

			<div class="card-wrap">
				<div class="card" role="region" aria-label="Rider signup form">
					<h2>Sign up as a rider</h2>
					<div class="sub">Create your rider account and start earning.</div>

					<form id="riderSignup" action="/signup/rider" method="POST" novalidate>
						<div id="flashed-messages">
							<!-- Flash messages will be inserted here -->
							<input type="hidden" id="server-flash" value="{{ get_flashed_messages(with_categories=true) | tojson | safe }}" />
						</div>
						<div id="errorDisplay" class="alert alert-error" style="display: none"></div>
						<div class="form-group">
							<label for="firstName">First Name</label>
							<input id="firstName" name="first_name" class="form-input" type="text" placeholder="Your first name" required />
						</div>

						<div class="form-group">
							<label for="lastName">Last Name</label>
							<input id="lastName" name="last_name" class="form-input" type="text" placeholder="Your last name" required />
						</div>

						<div class="form-group">
							<label for="riderEmail">Email address</label>
							<input id="riderEmail" name="email" class="form-input" type="email" placeholder="you@example.com" required />
						</div>

						<div class="form-group">
							<label for="riderPhone">Contact number</label>
							<input id="riderPhone" name="phone" class="form-input" type="tel" placeholder="+63 9xx xxx xxxx" pattern="[0-9\+\-\s]{7,20}" required />
						</div>

						<div class="form-group">
							<label>Vehicle Type</label>
							<div class="vehicle-options" style="grid-template-columns:repeat(2,1fr)">
								<div class="vehicle-option">
									<input type="radio" id="motorcycle" name="vehicle_type" value="motorcycle" required>
									<label for="motorcycle">
										<span class="vehicle-icon">üèçÔ∏è</span>
										<span>Motorcycle</span>
									</label>
								</div>
								<div class="vehicle-option">
									<input type="radio" id="bicycle" name="vehicle_type" value="bicycle">
									<label for="bicycle">
										<span class="vehicle-icon">üö≤</span>
										<span>Bicycle</span>
									</label>
								</div>
								<div class="vehicle-option">
									<input type="radio" id="truck" name="vehicle_type" value="truck">
									<label for="truck">
										<span class="vehicle-icon">üöõ</span>
										<span>Truck</span>
									</label>
								</div>
								<div class="vehicle-option">
									<input type="radio" id="van" name="vehicle_type" value="van">
									<label for="van">
										<span class="vehicle-icon">üöê</span>
										<span>Van</span>
									</label>
								</div>
							</div>
						</div>

						<div class="form-group">
							<label for="vehiclePlate">Vehicle Plate Number</label>
							<input id="vehiclePlate" name="vehicle_plate" class="form-input" type="text" placeholder="Enter plate number" required />
						</div>

						<div class="form-group">
							<label for="licenseNumber">Driver's License Number</label>
							<input id="licenseNumber" name="license_number" class="form-input" type="text" placeholder="Enter license number" required />
						</div>

					<div class="form-group">
						<label for="riderArea">Service Area</label>
						<select id="riderArea" name="service_area" class="form-select" required>
							<option value="">Select your service area</option>
							
							<optgroup label="NCR - National Capital Region">
								<option value="Manila">Manila</option>
								<option value="Quezon City">Quezon City</option>
								<option value="Makati">Makati</option>
								<option value="Pasig">Pasig</option>
								<option value="Taguig">Taguig</option>
								<option value="Mandaluyong">Mandaluyong</option>
								<option value="Marikina">Marikina</option>
								<option value="Pasay">Pasay</option>
								<option value="Para√±aque">Para√±aque</option>
								<option value="Las Pi√±as">Las Pi√±as</option>
								<option value="Muntinlupa">Muntinlupa</option>
								<option value="Caloocan">Caloocan</option>
								<option value="Malabon">Malabon</option>
								<option value="Navotas">Navotas</option>
								<option value="Valenzuela">Valenzuela</option>
								<option value="San Juan">San Juan</option>
							</optgroup>
							
							<optgroup label="Region I - Ilocos Region">
								<option value="Laoag, Ilocos Norte">Laoag, Ilocos Norte</option>
								<option value="Vigan, Ilocos Sur">Vigan, Ilocos Sur</option>
								<option value="San Fernando, La Union">San Fernando, La Union</option>
								<option value="Dagupan, Pangasinan">Dagupan, Pangasinan</option>
								<option value="Urdaneta, Pangasinan">Urdaneta, Pangasinan</option>
							</optgroup>
							
							<optgroup label="Region II - Cagayan Valley">
								<option value="Tuguegarao, Cagayan">Tuguegarao, Cagayan</option>
								<option value="Ilagan, Isabela">Ilagan, Isabela</option>
								<option value="Santiago, Isabela">Santiago, Isabela</option>
								<option value="Cauayan, Isabela">Cauayan, Isabela</option>
							</optgroup>
							
							<optgroup label="Region III - Central Luzon">
								<option value="San Fernando, Pampanga">San Fernando, Pampanga</option>
								<option value="Angeles, Pampanga">Angeles, Pampanga</option>
								<option value="Mabalacat, Pampanga">Mabalacat, Pampanga</option>
								<option value="Olongapo, Zambales">Olongapo, Zambales</option>
								<option value="Tarlac City, Tarlac">Tarlac City, Tarlac</option>
								<option value="Cabanatuan, Nueva Ecija">Cabanatuan, Nueva Ecija</option>
								<option value="San Jose, Nueva Ecija">San Jose, Nueva Ecija</option>
								<option value="Balanga, Bataan">Balanga, Bataan</option>
							</optgroup>
							
							<optgroup label="Region IV-A - CALABARZON">
								<option value="Calamba, Laguna">Calamba, Laguna</option>
								<option value="Santa Cruz, Laguna">Santa Cruz, Laguna</option>
								<option value="Sta Cruz, Laguna">Sta Cruz, Laguna</option>
								<option value="San Pablo, Laguna">San Pablo, Laguna</option>
								<option value="Bi√±an, Laguna">Bi√±an, Laguna</option>
								<option value="Los Ba√±os, Laguna">Los Ba√±os, Laguna</option>
								<option value="Cabuyao, Laguna">Cabuyao, Laguna</option>
								<option value="Batangas City, Batangas">Batangas City, Batangas</option>
								<option value="Lipa, Batangas">Lipa, Batangas</option>
								<option value="Tanauan, Batangas">Tanauan, Batangas</option>
								<option value="Lucena, Quezon">Lucena, Quezon</option>
								<option value="Antipolo, Rizal">Antipolo, Rizal</option>
								<option value="Cainta, Rizal">Cainta, Rizal</option>
								<option value="Tagaytay, Cavite">Tagaytay, Cavite</option>
								<option value="Bacoor, Cavite">Bacoor, Cavite</option>
								<option value="Imus, Cavite">Imus, Cavite</option>
								<option value="Dasmari√±as, Cavite">Dasmari√±as, Cavite</option>
							</optgroup>
							
							<optgroup label="Region IV-B - MIMAROPA">
								<option value="Calapan, Oriental Mindoro">Calapan, Oriental Mindoro</option>
								<option value="Puerto Princesa, Palawan">Puerto Princesa, Palawan</option>
								<option value="Boac, Marinduque">Boac, Marinduque</option>
							</optgroup>
							
							<optgroup label="Region V - Bicol Region">
								<option value="Legazpi, Albay">Legazpi, Albay</option>
								<option value="Naga, Camarines Sur">Naga, Camarines Sur</option>
								<option value="Iriga, Camarines Sur">Iriga, Camarines Sur</option>
								<option value="Sorsogon City, Sorsogon">Sorsogon City, Sorsogon</option>
							</optgroup>
							
							<optgroup label="Region VI - Western Visayas">
								<option value="Iloilo City, Iloilo">Iloilo City, Iloilo</option>
								<option value="Bacolod, Negros Occidental">Bacolod, Negros Occidental</option>
								<option value="Roxas, Capiz">Roxas, Capiz</option>
								<option value="Kalibo, Aklan">Kalibo, Aklan</option>
							</optgroup>
							
							<optgroup label="Region VII - Central Visayas">
								<option value="Cebu City, Cebu">Cebu City, Cebu</option>
								<option value="Mandaue, Cebu">Mandaue, Cebu</option>
								<option value="Lapu-Lapu, Cebu">Lapu-Lapu, Cebu</option>
								<option value="Tagbilaran, Bohol">Tagbilaran, Bohol</option>
								<option value="Dumaguete, Negros Oriental">Dumaguete, Negros Oriental</option>
							</optgroup>
							
							<optgroup label="Region VIII - Eastern Visayas">
								<option value="Tacloban, Leyte">Tacloban, Leyte</option>
								<option value="Ormoc, Leyte">Ormoc, Leyte</option>
								<option value="Calbayog, Samar">Calbayog, Samar</option>
							</optgroup>
							
							<optgroup label="Region IX - Zamboanga Peninsula">
								<option value="Zamboanga City, Zamboanga del Sur">Zamboanga City, Zamboanga del Sur</option>
								<option value="Pagadian, Zamboanga del Sur">Pagadian, Zamboanga del Sur</option>
								<option value="Dipolog, Zamboanga del Norte">Dipolog, Zamboanga del Norte</option>
							</optgroup>
							
							<optgroup label="Region X - Northern Mindanao">
								<option value="Cagayan de Oro, Misamis Oriental">Cagayan de Oro, Misamis Oriental</option>
								<option value="Iligan, Lanao del Norte">Iligan, Lanao del Norte</option>
								<option value="Valencia, Bukidnon">Valencia, Bukidnon</option>
								<option value="Malaybalay, Bukidnon">Malaybalay, Bukidnon</option>
							</optgroup>
							
							<optgroup label="Region XI - Davao Region">
								<option value="Davao City, Davao del Sur">Davao City, Davao del Sur</option>
								<option value="Tagum, Davao del Norte">Tagum, Davao del Norte</option>
								<option value="Panabo, Davao del Norte">Panabo, Davao del Norte</option>
								<option value="Digos, Davao del Sur">Digos, Davao del Sur</option>
								<option value="Mati, Davao Oriental">Mati, Davao Oriental</option>
							</optgroup>
							
							<optgroup label="Region XII - SOCCSKSARGEN">
								<option value="General Santos, South Cotabato">General Santos, South Cotabato</option>
								<option value="Koronadal, South Cotabato">Koronadal, South Cotabato</option>
								<option value="Tacurong, Sultan Kudarat">Tacurong, Sultan Kudarat</option>
								<option value="Kidapawan, Cotabato">Kidapawan, Cotabato</option>
							</optgroup>
							
							<optgroup label="Region XIII - Caraga">
								<option value="Butuan, Agusan del Norte">Butuan, Agusan del Norte</option>
								<option value="Surigao City, Surigao del Norte">Surigao City, Surigao del Norte</option>
								<option value="Tandag, Surigao del Sur">Tandag, Surigao del Sur</option>
								<option value="Bayugan, Agusan del Sur">Bayugan, Agusan del Sur</option>
							</optgroup>
							
							<optgroup label="CAR - Cordillera Administrative Region">
								<option value="Baguio, Benguet">Baguio, Benguet</option>
								<option value="Tabuk, Kalinga">Tabuk, Kalinga</option>
								<option value="La Trinidad, Benguet">La Trinidad, Benguet</option>
							</optgroup>
							
							<optgroup label="BARMM - Bangsamoro">
								<option value="Cotabato City, Maguindanao">Cotabato City, Maguindanao</option>
								<option value="Marawi, Lanao del Sur">Marawi, Lanao del Sur</option>
							</optgroup>
						</select>
					</div>						<div class="form-group">
							<label for="riderPassword">Create password</label>
							<input id="riderPassword" name="password" class="form-input" type="password" placeholder="Choose a secure password" minlength="8" required />
						</div>

						<div class="tnc-row">
							<input id="riderTnc" name="tnc" type="checkbox" required />
							<label for="riderTnc">I agree to the <a href="/terms" target="_blank">Terms &amp; Conditions</a> and confirm I have a valid driver's license</label>
						</div>

						<button type="submit" class="btn">Create rider account</button>

						<div class="small-note">Already have an account? <a href="/login">Log in</a></div>
					</form>
				</div>
			</div>
		</div>

		<script>
			// Toggle vehicle plate field based on vehicle type
			document.querySelectorAll('input[name="vehicle_type"]').forEach(radio => {
				radio.addEventListener('change', function() {
					const plateField = document.getElementById('vehiclePlate');
					const licenseField = document.getElementById('licenseNumber');
					const vehicleType = this.value;
					
					if (vehicleType === 'bicycle') {
						// Bicycles don't require plate or license
						plateField.required = false;
						plateField.disabled = true;
						plateField.placeholder = 'Not required for bicycle';
						licenseField.required = false;
						licenseField.disabled = true;
						licenseField.placeholder = 'Not required for bicycle';
					} else {
						plateField.required = true;
						plateField.disabled = false;
						licenseField.required = true;
						licenseField.disabled = false;

						// Set appropriate placeholders based on vehicle type
						switch (vehicleType) {
							case 'truck':
								plateField.placeholder = 'Enter truck plate number';
								licenseField.placeholder = 'Enter professional driver\'s license';
								break;
							case 'van':
								plateField.placeholder = 'Enter van plate number';
								licenseField.placeholder = 'Enter professional driver\'s license';
								break;
							case 'motorcycle':
							default:
								plateField.placeholder = 'Enter plate number';
								licenseField.placeholder = 'Enter license number';
						}
					}
				});
			});

			// Form validation helper functions
			function validateEmail(email) {
				const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
				return re.test(email.toLowerCase());
			}

			function validatePhoneNumber(phone) {
				const re = /^(?:\+63|0)[0-9\s\-]{9,}$/;
				return re.test(phone.replace(/\s+/g, ''));
			}

			function showError(message) {
				const errorDisplay = document.getElementById('errorDisplay');
				errorDisplay.textContent = message;
				errorDisplay.style.display = 'block';
				setTimeout(() => {
					errorDisplay.style.display = 'none';
				}, 5000);
			}

			// Form validation
			document.getElementById('riderSignup').addEventListener('submit', function(e) {
				const form = e.target;
				const tnc = form.querySelector('[name="tnc"]');
				const vehicleType = form.querySelector('input[name="vehicle_type"]:checked');
				const email = form.querySelector('[name="email"]').value;
				const phone = form.querySelector('[name="phone"]').value;
				
				let hasError = false;

				if (!tnc.checked) {
					e.preventDefault();
					showError('Please agree to the Terms & Conditions to continue.');
					tnc.focus();
					hasError = true;
					return;
				}

				if (!vehicleType) {
					e.preventDefault();
					showError('Please select a vehicle type.');
					hasError = true;
					return;
				}

				if (!validateEmail(email)) {
					e.preventDefault();
					showError('Please enter a valid email address.');
					form.querySelector('[name="email"]').focus();
					hasError = true;
					return;
				}

				if (!validatePhoneNumber(phone)) {
					e.preventDefault();
					showError('Please enter a valid Philippine phone number starting with +63.');
					form.querySelector('[name="phone"]').focus();
					hasError = true;
					return;
				}

				if (!hasError) {
					// Disable submit button to prevent double submission
					const submitBtn = form.querySelector('button[type="submit"]');
					submitBtn.disabled = true;
					submitBtn.textContent = 'Creating account...';
				}
			});

			// Live validation feedback
			const emailInput = document.querySelector('[name="email"]');
			const phoneInput = document.querySelector('[name="phone"]');

			emailInput.addEventListener('input', function(e) {
				const isValid = validateEmail(e.target.value);
				e.target.style.borderColor = e.target.value && !isValid ? 'var(--error)' : '';
			});

			phoneInput.addEventListener('input', function(e) {
				const isValid = validatePhoneNumber(e.target.value);
				e.target.style.borderColor = e.target.value && !isValid ? 'var(--error)' : '';
			});

			// Format phone number as user types
			phoneInput.addEventListener('input', function(e) {
				let value = e.target.value.replace(/\D/g, '');
				if (value.length > 0 && !value.startsWith('63')) {
					value = '63' + value;
				}
				if (value.length > 2) {
					value = '+' + value.slice(0, 2) + ' ' + value.slice(2);
				}
				if (value.length > 7) {
					value = value.slice(0, 7) + ' ' + value.slice(7);
				}
				if (value.length > 11) {
					value = value.slice(0, 11) + ' ' + value.slice(11);
				}
				e.target.value = value;
			});

			// Clear error display when user starts typing in any field
			document.querySelectorAll('.form-input, .form-select').forEach(input => {
				input.addEventListener('input', () => {
					document.getElementById('errorDisplay').style.display = 'none';
				});
			});

			// Handle flash messages
			function showFlashMessage(message, category) {
				const flashContainer = document.getElementById('flashed-messages');
				const messageDiv = document.createElement('div');
				messageDiv.className = `alert alert-${category}`;
				messageDiv.textContent = message;
				flashContainer.appendChild(messageDiv);
				
				// Auto-hide after 5 seconds
				setTimeout(() => {
					messageDiv.style.opacity = '0';
					messageDiv.style.transition = 'opacity 0.5s';
					setTimeout(() => messageDiv.remove(), 500);
				}, 5000);
			}

			// Process server flash messages on page load
			window.addEventListener('load', function() {
				const serverFlash = document.getElementById('server-flash');
				if (serverFlash) {
					try {
						const messages = JSON.parse(serverFlash.value);
						messages.forEach(([category, message]) => {
							showFlashMessage(message, category);
						});
						serverFlash.remove(); // Remove after processing
					} catch (e) {
						console.error('Error processing flash messages:', e);
					}
				}
			});
		</script>
	</body>
</html>
