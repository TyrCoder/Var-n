<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Rider Sign Up — Varón</title>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
		<style>
			:root {
				--background: #050505;
				--surface: rgba(12, 12, 12, 0.92);
				--card: #ffffff;
				--text: #f5f5f5;
				--muted: #9e9e9e;
				--accent: #d4d4d4;
				--accent-strong: #f5f5f5;
				--accent-dark: #272727;
				--line: rgba(255, 255, 255, 0.18);
				--error: #4d4d4d;
				--success: #d5d5d5;
				--shadow: 0 28px 80px rgba(0, 0, 0, 0.55);
			}

			* {
				box-sizing: border-box;
			}

			html, body {
				margin: 0;
				min-height: 100vh;
				font-family: 'Inter', 'Segoe UI', system-ui, -apple-system, BlinkMacSystemFont, Arial;
				background: var(--background);
				color: var(--text);
				line-height: 1.5;
			}

			body::before,
			body::after {
				content: '';
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.25), transparent 50%),
					radial-gradient(circle at 80% 0%, rgba(255, 255, 255, 0.18), transparent 45%);
				pointer-events: none;
				z-index: 0;
				mix-blend-mode: screen;
			}

			body::after {
				background: radial-gradient(circle at 70% 80%, rgba(255, 255, 255, 0.18), transparent 45%);
				mix-blend-mode: lighten;
			}

			.auth-shell {
				position: relative;
				z-index: 1;
				padding: 32px clamp(20px, 6vw, 72px) 64px;
			}

			.auth-header {
				display: flex;
				align-items: center;
				justify-content: space-between;
				gap: 16px;
				margin-bottom: 32px;
			}

			.logo {
				display: flex;
				align-items: center;
				gap: 12px;
				text-decoration: none;
				color: var(--text);
				font-weight: 700;
			}

			.logo-mark {
				width: 42px;
				height: 42px;
				border-radius: 12px;
				background: linear-gradient(135deg, #0f0f0f, #3f3f3f);
				display: grid;
				place-items: center;
				color: #f5f5f5;
				font-weight: 800;
				letter-spacing: 0.08em;
			}

			.persona-switch {
				display: flex;
				gap: 8px;
				padding: 6px;
				border-radius: 999px;
				background: rgba(255, 255, 255, 0.05);
				border: 1px solid rgba(255, 255, 255, 0.08);
			}

			.persona-link {
				text-decoration: none;
				color: var(--muted);
				font-size: 14px;
				font-weight: 600;
				padding: 8px 18px;
				border-radius: 999px;
				transition: color 0.2s, background 0.2s;
			}

			.persona-link.active {
				background: #ffffff;
				color: #111111;
			}

			.ghost-link {
				color: var(--muted);
				text-decoration: none;
				font-weight: 600;
				font-size: 14px;
			}

			.auth-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
				gap: clamp(28px, 4vw, 56px);
				align-items: stretch;
			}

			.info-panel {
				background: var(--surface);
				border: 1px solid rgba(255, 255, 255, 0.09);
				border-radius: 32px;
				padding: clamp(28px, 4vw, 48px);
				box-shadow: var(--shadow);
				position: relative;
				overflow: hidden;
			}

			.info-panel::after {
				content: '';
				position: absolute;
				inset: 0;
				background: radial-gradient(circle at 30% 25%, rgba(255, 255, 255, 0.15), transparent 50%);
				pointer-events: none;
			}

			.badge {
				display: inline-flex;
				align-items: center;
				gap: 8px;
				font-size: 12px;
				letter-spacing: 0.3em;
				text-transform: uppercase;
				color: var(--muted);
				margin-bottom: 14px;
			}

			.info-title {
				margin: 0 0 18px;
				font-size: clamp(32px, 4vw, 48px);
				line-height: 1.15;
			}

			.info-panel p {
				margin: 0 0 24px;
				color: rgba(245, 245, 245, 0.8);
			}

			.feature-list {
				margin: 0;
				padding: 0;
				list-style: none;
				display: flex;
				flex-direction: column;
				gap: 16px;
			}

			.feature-item {
				display: flex;
				gap: 14px;
				align-items: flex-start;
			}

			.feature-icon {
				width: 44px;
				height: 44px;
				border-radius: 14px;
				background: rgba(255, 255, 255, 0.06);
				display: grid;
				place-items: center;
				border: 1px solid rgba(255, 255, 255, 0.08);
			}

			.feature-content strong {
				color: #ffffff;
				display: block;
				font-size: 15px;
				margin-bottom: 2px;
			}

			.feature-content span {
				color: rgba(245, 245, 245, 0.75);
				font-size: 14px;
			}

			.stat-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
				gap: 16px;
				margin-top: 32px;
			}

			.stat-card {
				background: rgba(17, 17, 17, 0.7);
				border: 1px solid rgba(255, 255, 255, 0.08);
				border-radius: 18px;
				padding: 18px;
				backdrop-filter: blur(12px);
			}

			.stat-value {
				font-size: 28px;
				font-weight: 700;
				color: #ffffff;
				margin-bottom: 4px;
			}

			.stat-label {
				color: rgba(245, 245, 245, 0.7);
				font-size: 13px;
			}

			.form-panel {
				position: relative;
			}

			.form-card {
				background: var(--card);
				color: #111111;
				border-radius: 32px;
				padding: clamp(28px, 4vw, 36px);
				box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
			}

			.progress-tracker {
				display: flex;
				gap: 20px;
				margin-bottom: 24px;
			}

			.progress-step {
				display: flex;
				align-items: center;
				gap: 10px;
				font-size: 14px;
				font-weight: 600;
				color: #6b6b6b;
			}

			.progress-step.active {
				color: #111111;
			}

			.progress-step svg {
				width: 28px;
				height: 28px;
				padding: 6px;
				border-radius: 999px;
				background: rgba(255, 255, 255, 0.12);
				stroke: #1f1f1f;
			}

			.status-banner {
				display: flex;
				align-items: center;
				gap: 12px;
				padding: 14px 16px;
				background: rgba(255, 255, 255, 0.08);
				border-radius: 14px;
				border: 1px solid rgba(255, 255, 255, 0.2);
				color: #1f1f1f;
				font-size: 14px;
				margin-bottom: 20px;
			}

			.form-title {
				margin: 0 0 10px;
				font-size: 28px;
			}

			.form-subtext {
				margin: 0 0 28px;
				color: #6b6b6b;
				font-size: 15px;
			}

			.field-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
				gap: 18px 20px;
				margin-bottom: 18px;
			}

			.form-group {
				display: flex;
				flex-direction: column;
				gap: 6px;
			}

			.form-group label {
				font-size: 14px;
				font-weight: 600;
				color: #111111;
			}

			.input-shell {
				position: relative;
			}

			.form-input,
			.form-select,
			textarea.form-input {
				width: 100%;
				border: 1px solid #e5e5e5;
				border-radius: 14px;
				padding: 12px 16px 12px 48px;
				font-size: 15px;
				font-weight: 500;
				color: #111111;
				background: #f5f5f5;
				transition: border 0.2s, box-shadow 0.2s, background 0.2s;
				appearance: none;
			}

			.form-select {
				padding-right: 48px;
				background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%231f1f1f'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
				background-repeat: no-repeat;
				background-position: right 16px center;
				background-size: 18px;
			}

			.form-input:focus,
			.form-select:focus {
				outline: none;
				border-color: var(--accent);
				background: #ffffff;
				box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.2);
			}

			textarea.form-input {
				min-height: 90px;
				padding-top: 16px;
				resize: vertical;
			}

			.input-icon {
				position: absolute;
				top: 50%;
				left: 16px;
				transform: translateY(-50%);
				width: 20px;
				height: 20px;
				display: flex;
				align-items: center;
				justify-content: center;
				color: #9e9e9e;
			}

			.password-shell .form-input {
				padding-right: 48px;
			}

			.password-toggle {
				position: absolute;
				right: 12px;
				top: 50%;
				transform: translateY(-50%);
				background: none;
				border: none;
				cursor: pointer;
				display: flex;
				padding: 6px;
				color: #9e9e9e;
			}

			.password-toggle svg {
				width: 20px;
				height: 20px;
			}

			.helper-text {
				font-size: 13px;
				color: #9e9e9e;
			}

			.alert {
				padding: 12px 14px;
				border-radius: 12px;
				margin-bottom: 18px;
				font-size: 14px;
				font-weight: 600;
			}

			.alert-error {
				background: rgba(255, 255, 255, 0.08);
				border: 1px solid rgba(255, 255, 255, 0.15);
				color: #1f1f1f;
			}

			.vehicle-section {
				margin: 24px 0;
				padding: 20px;
				border-radius: 20px;
				background: #f3f3f3;
				border: 1px solid #e5e5e5;
			}

			.vehicle-section header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				flex-wrap: wrap;
				gap: 8px;
			}

			.vehicle-options {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
				gap: 14px;
				margin-top: 18px;
			}

			.vehicle-option {
				position: relative;
			}

			.vehicle-option input {
				position: absolute;
				top: 0;
				left: 0;
				opacity: 0;
			}

			.vehicle-option label {
				border: 1px solid #e5e5e5;
				border-radius: 16px;
				padding: 16px;
				display: flex;
				flex-direction: column;
				gap: 6px;
				align-items: flex-start;
				background: #ffffff;
				transition: border 0.2s, box-shadow 0.2s;
			}

			.vehicle-option input:checked + label {
				border-color: var(--accent);
				box-shadow: 0 12px 24px rgba(255, 255, 255, 0.16);
			}

			.vehicle-icon {
				width: 34px;
				height: 34px;
				border-radius: 10px;
				background: rgba(255, 255, 255, 0.12);
				display: flex;
				align-items: center;
				justify-content: center;
				border: 1px solid rgba(255, 255, 255, 0.2);
			}

			.vehicle-label {
				font-weight: 600;
				color: #111111;
			}

			.vehicle-meta {
				font-size: 13px;
				color: #6b6b6b;
			}

			#vehicleDetailsContainer {
				background: #ffffff;
				border-radius: 18px;
				border: 1px solid #e5e5e5;
				padding: 18px;
				margin-top: 16px;
			}

			.vehicle-detail-card + .vehicle-detail-card {
				margin-top: 16px;
			}

			.vehicle-detail-head {
				display: flex;
				justify-content: space-between;
				align-items: center;
				font-size: 14px;
				font-weight: 600;
			}

			.vehicle-detail-head span {
				color: #9e9e9e;
				font-weight: 500;
			}

			.service-area-card {
				margin-top: 16px;
				padding: 20px;
				border-radius: 20px;
				background: #f3f3f3;
				border: 1px solid #e5e5e5;
			}

			#provincesContainer {
				margin-top: 18px;
				padding: 16px;
				border-radius: 16px;
				background: #ffffff;
				border: 1px solid #e5e5e5;
			}

			.province-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
				gap: 10px;
			}

			.province-grid label {
				display: flex;
				gap: 10px;
				align-items: center;
				font-size: 13px;
				color: #111111;
			}

			.tnc-row {
				display: flex;
				gap: 12px;
				align-items: flex-start;
				margin: 20px 0;
			}

			.tnc-row input[type="checkbox"] {
				margin-top: 4px;
				width: 18px;
				height: 18px;
				border-radius: 5px;
				border: 1px solid #d0d0d0;
				accent-color: var(--accent);
			}

			.tnc-row label {
				font-size: 14px;
				color: #4b4b4b;
			}

			.primary-btn {
				width: 100%;
				border: none;
				border-radius: 16px;
				padding: 14px;
				font-size: 16px;
				font-weight: 700;
				color: #f5f5f5;
				background: linear-gradient(135deg, #0f0f0f, #3f3f3f);
				cursor: pointer;
				box-shadow: 0 18px 40px rgba(0, 0, 0, 0.35);
				transition: transform 0.15s ease, box-shadow 0.15s ease;
			}

			.primary-btn:disabled {
				opacity: 0.7;
				cursor: not-allowed;
			}

			.primary-btn:not(:disabled):hover {
				transform: translateY(-2px);
				box-shadow: 0 26px 46px rgba(0, 0, 0, 0.3);
			}

			.meta-row {
				margin-top: 16px;
				text-align: center;
				font-size: 14px;
				color: #9e9e9e;
			}

			.meta-row a {
				color: #111111;
				font-weight: 600;
				text-decoration: none;
			}

			.meta-row a:hover {
				text-decoration: underline;
			}

			.trust-note {
				margin-top: 12px;
				display: flex;
				align-items: center;
				justify-content: center;
				gap: 10px;
				font-size: 13px;
				color: #6b6b6b;
			}

			.trust-note svg {
				width: 18px;
				height: 18px;
				stroke: #6b6b6b;
				stroke-width: 1.6;
				stroke-linecap: round;
				stroke-linejoin: round;
			}

			@media (max-width: 900px) {
				.auth-header {
					flex-direction: column;
					align-items: flex-start;
				}

				.form-card {
					padding: 24px;
				}
			}

			@media (max-width: 600px) {
				.auth-shell {
					padding: 16px;
				}

				.progress-tracker {
					flex-direction: column;
					gap: 12px;
				}
			}
		</style>
	</head>
	<body>
		<div class="auth-shell">
			<header class="auth-header">
				<a class="logo" href="/">
					<span class="logo-mark">VR</span>
					<span>Varón Logistics</span>
				</a>
				<div class="persona-switch" aria-label="Switch signup persona">
					<a class="persona-link" href="/signupSeller">Seller</a>
					<a class="persona-link active" href="/signup/rider">Rider</a>
				</div>
				<a class="ghost-link" href="/login">Back to login</a>
			</header>

			<main class="auth-grid">
				<section class="info-panel">
					<div class="badge">Rider network</div>
					<h1 class="info-title">Earn on your terms with Varón.</h1>
					<p>Flexible routes, instant earnings summary, and 24/7 dispatch support. Select the vehicles that fit your lifestyle and get verified in minutes.</p>

					<ul class="feature-list">
						<li class="feature-item">
							<span class="feature-icon">
								<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#f5f5f5" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><path d="M3 8l4-4h10l4 4v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z"/><path d="M3 8h18"/><path d="M15 13a3 3 0 1 0-6 0 3 3 0 0 0 6 0Z"/></svg>
							</span>
							<div class="feature-content">
								<strong>Weekly payouts</strong>
								<span>Track trips and deposits from one secure wallet.</span>
							</div>
						</li>
						<li class="feature-item">
							<span class="feature-icon">
								<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#f5f5f5" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
							</span>
							<div class="feature-content">
								<strong>Route intelligence</strong>
								<span>Auto-assign drops based on your service zones.</span>
							</div>
						</li>
						<li class="feature-item">
							<span class="feature-icon">
								<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#f5f5f5" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
							</span>
							<div class="feature-content">
								<strong>Safety-first</strong>
								<span>Live support, insurance coverage, and ratings coaching.</span>
							</div>
						</li>
					</ul>

					<div class="stat-grid" aria-label="Rider highlights">
						<div class="stat-card">
							<div class="stat-value">12k+</div>
							<div class="stat-label">Active riders</div>
						</div>
						<div class="stat-card">
							<div class="stat-value">98%</div>
							<div class="stat-label">On-time deliveries</div>
						</div>
						<div class="stat-card">
							<div class="stat-value">3 mins</div>
							<div class="stat-label">Average OTP approval</div>
						</div>
					</div>
				</section>

				<section class="form-panel" role="region" aria-label="Rider signup form">
					<div class="form-card">
						<div class="progress-tracker" aria-hidden="true">
							<div class="progress-step active">
								<svg viewBox="0 0 24 24" fill="none"><path d="M12 5v14"/><path d="M5 12h14"/></svg>
								<span>Profile &amp; vehicle</span>
							</div>
							<div class="progress-step">
								<svg viewBox="0 0 24 24" fill="none"><path d="M20 6L9 17l-5-5"/></svg>
								<span>Service area &amp; OTP</span>
							</div>
						</div>

						<div class="status-banner">
							<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1f1f1f" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><path d="M12 9v4"/><path d="M12 17h.01"/><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2Z"/></svg>
							<span>Use accurate details so we can activate your rider wallet right after OTP verification.</span>
						</div>

						<h2 class="form-title">Finish your rider application</h2>
						<p class="form-subtext">Complete the form below. Our system will send an OTP to the email address you provide.</p>

						<form id="riderSignup" action="/signup/rider" method="POST" novalidate>
							<div id="flashed-messages">
								<input type="hidden" id="server-flash" value="{{ get_flashed_messages(with_categories=true) | tojson | safe }}" />
							</div>
							<div id="errorDisplay" class="alert alert-error" style="display:none" role="alert"></div>

							<div class="field-grid">
								<div class="form-group">
									<label for="firstName">First name</label>
									<div class="input-shell">
										<span class="input-icon">
											<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#9e9e9e" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M12 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4Z"/><path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"/></svg>
										</span>
										<input id="firstName" name="first_name" class="form-input" type="text" placeholder="Juan" required />
									</div>
								</div>
								<div class="form-group">
									<label for="lastName">Last name</label>
									<div class="input-shell">
										<span class="input-icon">
											<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#9e9e9e" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M12 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4Z"/><path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"/></svg>
										</span>
										<input id="lastName" name="last_name" class="form-input" type="text" placeholder="Dela Cruz" required />
									</div>
								</div>
							</div>

							<div class="field-grid">
								<div class="form-group">
									<label for="riderEmail">Email address</label>
									<div class="input-shell">
										<span class="input-icon">
											<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#9e9e9e" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16v16H4z"/><path d="m4 4 8 8 8-8"/></svg>
										</span>
										<input id="riderEmail" name="email" class="form-input" type="email" placeholder="you@example.com" required />
									</div>
								</div>
								<div class="form-group">
									<label for="riderPhone">Contact number</label>
									<div class="input-shell">
										<span class="input-icon">
											<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#9e9e9e" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92V21a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6A19.79 19.79 0 0 1 2 5.18 2 2 0 0 1 4 3h3.09a2 2 0 0 1 2 1.72l.35 2.31a2 2 0 0 1-.57 1.76L7.91 10a16 16 0 0 0 6.09 6.09l1.21-1.21a2 2 0 0 1 1.76-.57l2.31.35A2 2 0 0 1 22 16.92Z"/></svg>
										</span>
										<input id="riderPhone" name="phone" class="form-input" type="tel" value="+63 " placeholder="+63 9xx xxx xxxx" pattern="[0-9\+\-\s]{7,20}" required />
									</div>
									<span class="helper-text">Use a number that can receive OTP and dispatch updates.</span>
								</div>
							</div>

							<div class="field-grid">
								<div class="form-group">
									<label for="licenseNumber">Driver's license number</label>
									<div class="input-shell">
										<span class="input-icon">
											<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#9e9e9e" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M3 5h18v14H3z"/><path d="M7 9h10"/><path d="M7 13h4"/><path d="M15 13h2"/></svg>
										</span>
										<input id="licenseNumber" name="license_number" class="form-input" type="text" placeholder="DLN-0000000" required />
									</div>
								</div>
								<div class="form-group">
									<label for="riderPassword">Create password</label>
									<div class="input-shell password-shell">
										<span class="input-icon">
											<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#9e9e9e" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M12 11c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3 1.34 3 3 3Z"/><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/></svg>
										</span>
										<input id="riderPassword" name="password" class="form-input" type="password" placeholder="At least 6 characters" minlength="6" required />
										<button type="button" class="password-toggle" onclick="togglePassword('riderPassword', this)">
											<svg class="eye-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
												<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"></path>
												<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
											</svg>
											<svg class="eye-slash-icon" style="display:none" fill="none" stroke="currentColor" viewBox="0 0 24 24">
												<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0 1 12 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 0 1 1.563-3.029m5.858.908a3 3 0 1 1 4.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88 6.59 6.59m7.532 7.532 3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0 1 12 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 0 1-4.132 5.411m0 0L21 21"></path>
											</svg>
										</button>
									</div>
									<span class="helper-text">Use numbers plus letters for stronger security.</span>
								</div>
							</div>

							<div class="vehicle-section" aria-labelledby="vehicle-group-label">
								<header>
									<div>
										<strong id="vehicle-group-label">Vehicle type(s)</strong>
										<div class="helper-text">Select all that apply. We'll request plate details for each.</div>
									</div>
									<span class="helper-text">Multi-vehicle ready</span>
								</header>
								<div class="vehicle-options">
									<div class="vehicle-option">
										<input type="checkbox" id="vehicle-motorcycle" name="vehicle_type" value="motorcycle" onchange="updateVehicleDetails()" />
										<label for="vehicle-motorcycle">
											<span class="vehicle-icon">
												<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#1f1f1f" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M4 17a3 3 0 1 0 0-6"/><path d="M20 17a3 3 0 1 0 0-6"/><path d="M4 14h16l-3-5h-4l-3 5"/></svg>
											</span>
											<span class="vehicle-label">Motorcycle</span>
											<span class="vehicle-meta">Quick courier drops</span>
										</label>
									</div>
									<div class="vehicle-option">
										<input type="checkbox" id="vehicle-van" name="vehicle_type" value="van" onchange="updateVehicleDetails()" />
										<label for="vehicle-van">
											<span class="vehicle-icon">
												<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#1f1f1f" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M3 7h13l5 5v5H3z"/><path d="M3 7V5h4"/><circle cx="7" cy="17" r="2"/><circle cx="17" cy="17" r="2"/></svg>
											</span>
											<span class="vehicle-label">Van</span>
											<span class="vehicle-meta">Cold chain &amp; parcels</span>
										</label>
									</div>
									<div class="vehicle-option">
										<input type="checkbox" id="vehicle-truck" name="vehicle_type" value="truck" onchange="updateVehicleDetails()" />
										<label for="vehicle-truck">
											<span class="vehicle-icon">
												<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#1f1f1f" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M16 3H1v13h15V3Z"/><path d="M16 8h4l3 3v5h-7"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
											</span>
											<span class="vehicle-label">Truck</span>
											<span class="vehicle-meta">Bulk freight</span>
										</label>
									</div>
									<div class="vehicle-option">
										<input type="checkbox" id="vehicle-car" name="vehicle_type" value="car" onchange="updateVehicleDetails()" />
										<label for="vehicle-car">
											<span class="vehicle-icon">
												<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#1f1f1f" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M5 16V8l2-3h10l2 3v8"/><path d="M2 16h20"/><circle cx="7.5" cy="18.5" r="2.5"/><circle cx="16.5" cy="18.5" r="2.5"/></svg>
											</span>
											<span class="vehicle-label">Car</span>
											<span class="vehicle-meta">Same-day delivery</span>
										</label>
									</div>
									<div class="vehicle-option">
										<input type="checkbox" id="vehicle-bicycle" name="vehicle_type" value="bicycle" onchange="updateVehicleDetails()" />
										<label for="vehicle-bicycle">
											<span class="vehicle-icon">
												<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#1f1f1f" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><circle cx="5.5" cy="16.5" r="3.5"/><circle cx="18.5" cy="16.5" r="3.5"/><path d="M12 5l4 5h-4l3 6"/><path d="M5.5 16.5l3-6h3"/></svg>
											</span>
											<span class="vehicle-label">Bicycle</span>
											<span class="vehicle-meta">Dense city runs</span>
										</label>
									</div>
								</div>
								<div id="vehicleDetailsContainer" style="display:none;"></div>
							</div>

							<div class="service-area-card">
								<div class="form-group">
									<label for="riderRegion">Select your service area</label>
									<div class="input-shell">
										<span class="input-icon">
											<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#9e9e9e" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13S3 17 3 10a9 9 0 0 1 18 0Z"/><circle cx="12" cy="10" r="3"/></svg>
										</span>
										<select id="riderRegion" name="region" class="form-select" required onchange="toggleRegionProvinces(this.value)">
											<option value="">Select a region</option>
											<option value="North Luzon">North Luzon</option>
											<option value="Central Luzon">Central Luzon</option>
											<option value="South Luzon">South Luzon</option>
											<option value="Visayas">Visayas</option>
											<option value="Mindanao">Mindanao</option>
										</select>
									</div>
									<span class="helper-text">Optional: limit drops to specific provinces or cities.</span>
								</div>
								<div id="provincesContainer" style="display:none"></div>
								<input type="hidden" id="serviceAreaInput" name="service_area" required />
							</div>

							<div class="field-grid">
								<div class="form-group">
									<label for="riderConfirmPassword">Confirm password</label>
									<div class="input-shell password-shell">
										<span class="input-icon">
											<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#9e9e9e" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M12 11c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3 1.34 3 3 3Z"/><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/></svg>
										</span>
										<input id="riderConfirmPassword" name="confirm_password" class="form-input" type="password" placeholder="Re-enter your password" minlength="6" required />
										<button type="button" class="password-toggle" onclick="togglePassword('riderConfirmPassword', this)">
											<svg class="eye-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
												<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"></path>
												<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268-2.943 9.542-7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
											</svg>
											<svg class="eye-slash-icon" style="display:none" fill="none" stroke="currentColor" viewBox="0 0 24 24">
												<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0 1 12 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 0 1 1.563-3.029m5.858.908a3 3 0 1 1 4.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88 6.59 6.59m7.532 7.532 3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0 1 12 5c4.478 0 8.268-2.943 9.543 7a10.025 10.025 0 0 1-4.132 5.411m0 0L21 21"></path>
											</svg>
										</button>
									</div>
									<span class="helper-text">Repeat your password to avoid typos during OTP.</span>
								</div>
								<div class="form-group">
									<label>&nbsp;</label>
									<p class="helper-text">OTP review starts the moment we receive your submission.</p>
								</div>
							</div>

							<div class="tnc-row">
								<input id="riderTnc" name="tnc" type="checkbox" required />
								<label for="riderTnc">I agree to the <a href="/terms" target="_blank">Terms &amp; Conditions</a> and confirm I have a valid driver's license.</label>
							</div>

							<button type="submit" class="primary-btn">Create rider account</button>
						</form>

						<div class="meta-row">Already part of the Varón fleet? <a href="/login">Log in here</a></div>
						<div class="trust-note">
							<svg viewBox="0 0 24 24" fill="none">
								<path d="M20 6L9 17l-5-5"></path>
							</svg>
							<span>Secure OTP verification • SOC2-aligned infrastructure</span>
						</div>
					</div>
				</section>

			</main>
		</div>

		<script>
	function showNotification(message, type = 'error') {
		const notification = document.createElement('div');
		notification.style.cssText = `
			position: fixed;
			top: 20px;
			right: 20px;
			padding: 16px 24px;
			background: ${type === 'error' ? '#1f1f1f' : '#4d4d4d'};
			color: #f5f5f5;
			border-radius: 8px;
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
			font-size: 14px;
			font-weight: 600;
			z-index: 10000;
			animation: slideIn 0.3s ease;
			max-width: 420px;
		`;
		notification.textContent = message;
		document.body.appendChild(notification);

		setTimeout(() => {
			notification.style.animation = 'slideOut 0.3s ease';
			setTimeout(() => notification.remove(), 300);
		}, 4000);
	}

	const notifStyle = document.createElement('style');
	notifStyle.textContent = `
		@keyframes slideIn {
			from { transform: translateX(400px); opacity: 0; }
			to { transform: translateX(0); opacity: 1; }
		}
		@keyframes slideOut {
			from { transform: translateX(0); opacity: 1; }
			to { transform: translateX(400px); opacity: 0; }
		}
	`;
	document.head.appendChild(notifStyle);

	function togglePassword(inputId, button) {
		const input = document.getElementById(inputId);
		if (!input) return;
		const eyeIcon = button.querySelector('.eye-icon');
		const eyeSlashIcon = button.querySelector('.eye-slash-icon');

		if (input.type === 'password') {
			input.type = 'text';
			eyeIcon.style.display = 'none';
			eyeSlashIcon.style.display = 'block';
		} else {
			input.type = 'password';
			eyeIcon.style.display = 'block';
			eyeSlashIcon.style.display = 'none';
		}
	}

	function validateEmail(email) {
		const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
		return re.test((email || '').toLowerCase());
	}

	function validatePhoneNumber(phone) {
		const re = /^(?:\+63|0)[0-9\s-]{9,}$/;
		return re.test((phone || '').replace(/\s+/g, ''));
	}

	function showFlashMessage(message, category = 'info') {
		const flashContainer = document.getElementById('flashed-messages');
		if (!flashContainer) return;
		const messageDiv = document.createElement('div');
		messageDiv.className = `alert alert-${category}`;
		messageDiv.textContent = message;
		flashContainer.appendChild(messageDiv);

		setTimeout(() => {
			messageDiv.style.opacity = '0';
			messageDiv.style.transition = 'opacity 0.4s ease';
			setTimeout(() => messageDiv.remove(), 400);
		}, 4000);
	}

	window.addEventListener('load', () => {
		const serverFlash = document.getElementById('server-flash');
		if (serverFlash && serverFlash.value) {
			try {
				const messages = JSON.parse(serverFlash.value);
				messages.forEach(([category, message]) => showFlashMessage(message, category));
			} catch (error) {
				console.error('Error processing flash messages:', error);
			}
			serverFlash.remove();
		}
	});

	const regionProvinces = {
		'North Luzon': ['Ilocos Norte', 'Ilocos Sur', 'La Union', 'Pangasinan', 'Baguio City', 'Benguet', 'Abra', 'Kalinga', 'Apayao', 'Mountain Province', 'Cagayan', 'Isabela', 'Nueva Vizcaya', 'Quirino', 'Batanes'],
		'Central Luzon': ['Pampanga', 'Tarlac', 'Nueva Ecija', 'Zambales', 'Bataan', 'Bulacan', 'Aurora', 'Angeles City', 'Olongapo City', 'San Fernando City'],
		'South Luzon': ['Laguna', 'Batangas', 'Cavite', 'Rizal', 'Quezon', 'Antipolo City', 'Lucena City', 'Batangas City', 'Lipa City', 'Tagaytay City', 'Calamba City', 'Los Baños', 'Biñan City', 'Cabuyao', 'San Pablo City', 'Albay', 'Camarines Norte', 'Camarines Sur', 'Catanduanes', 'Masbate', 'Sorsogon', 'Marinduque', 'Occidental Mindoro', 'Oriental Mindoro', 'Palawan', 'Romblon', 'Manila', 'Quezon City', 'Makati', 'Pasig', 'Taguig', 'Mandaluyong', 'Marikina', 'Pasay', 'Parañaque', 'Las Piñas', 'Muntinlupa', 'Caloocan', 'Malabon', 'Navotas', 'Valenzuela', 'San Juan'],
		'Visayas': ['Cebu', 'Cebu City', 'Mandaue City', 'Lapu-Lapu City', 'Talisay City', 'Iloilo', 'Iloilo City', 'Bacolod City', 'Negros Occidental', 'Negros Oriental', 'Bohol', 'Tagbilaran City', 'Dumaguete City', 'Roxas City', 'Kalibo', 'Tacloban City', 'Ormoc City', 'Leyte', 'Samar', 'Eastern Samar', 'Northern Samar', 'Biliran', 'Southern Leyte'],
		'Mindanao': ['Davao City', 'Davao del Norte', 'Davao del Sur', 'Davao Oriental', 'Davao de Oro', 'Cagayan de Oro City', 'Misamis Oriental', 'Misamis Occidental', 'Iligan City', 'Zamboanga City', 'Zamboanga del Norte', 'Zamboanga del Sur', 'Zamboanga Sibugay', 'General Santos City', 'South Cotabato', 'North Cotabato', 'Sultan Kudarat', 'Butuan City', 'Agusan del Norte', 'Agusan del Sur', 'Surigao del Norte', 'Surigao del Sur', 'Cotabato City', 'Maguindanao', 'Lanao del Norte', 'Lanao del Sur', 'Marawi City', 'Bukidnon', 'Valencia City', 'Malaybalay City']
	};

	window.toggleRegionProvinces = function(region) {
		const container = document.getElementById('provincesContainer');
		const provinces = regionProvinces[region] || [];
		container.innerHTML = '';

		if (region && provinces.length) {
			container.innerHTML = `
				<div style="margin-bottom:12px">
					<label style="font-size:14px;font-weight:600;color:#111111">Serve specific provinces/cities in ${region}? (Optional)</label>
					<small style="display:block;color:#6b6b6b;font-size:12px;margin-top:4px">Leave unchecked to serve the entire ${region} region. Check specific provinces if you want to limit your service area.</small>
				</div>
				<div class="province-grid">
					${provinces.map(province => `
						<label>
							<input type="checkbox" name="province" value="${province}" data-region="${region}" onchange="updateServiceArea()">
							<span>${province}</span>
						</label>
					`).join('')}
				</div>
			`;
			container.style.display = 'block';
		} else {
			container.style.display = 'none';
		}

		updateServiceArea();
	};

	window.updateServiceArea = function() {
		const regionSelect = document.getElementById('riderRegion');
		const selectedRegion = regionSelect ? regionSelect.value : '';
		const selectedProvinces = Array.from(document.querySelectorAll('input[name="province"]:checked')).map(cb => cb.value);
		const serviceAreaInput = document.getElementById('serviceAreaInput');

		const serviceAreas = [];
		if (selectedRegion) {
			serviceAreas.push(selectedRegion);
			if (selectedProvinces.length) {
				serviceAreas.push(...selectedProvinces);
			}
		}

		const value = serviceAreas.join(',');
		if (serviceAreaInput) {
			serviceAreaInput.value = value;
			if (selectedRegion) {
				serviceAreaInput.setCustomValidity('');
			} else {
				serviceAreaInput.setCustomValidity('Please select a region');
			}
		}
	};

	window.updateVehicleDetails = function() {
		const vehicleCheckboxes = document.querySelectorAll('input[name="vehicle_type"]:checked');
		const container = document.getElementById('vehicleDetailsContainer');
		if (!container) return;

		container.innerHTML = '';
		if (!vehicleCheckboxes.length) {
			container.style.display = 'none';
			return;
		}

		container.style.display = 'block';
		Array.from(vehicleCheckboxes).forEach(cb => {
			const vehicleLabel = cb.closest('.vehicle-option')?.querySelector('.vehicle-label')?.textContent || cb.value;
			const vehicleSection = document.createElement('div');
			vehicleSection.className = 'vehicle-detail-card';
			vehicleSection.innerHTML = `
				<div class="vehicle-detail-head">
					<span>${vehicleLabel}</span>
					<span>Required</span>
				</div>
				<div class="form-group" style="margin-top:12px;">
					<label for="vehiclePlate_${cb.value}">${vehicleLabel} plate number</label>
					<input id="vehiclePlate_${cb.value}" name="vehicle_plate_${cb.value}" class="form-input" type="text" placeholder="Enter ${vehicleLabel.toLowerCase()} plate number" required />
				</div>
			`;
			container.appendChild(vehicleSection);
		});
	};

	function initializeVehicleListeners() {
		const checkboxes = document.querySelectorAll('input[name="vehicle_type"]');
		checkboxes.forEach(checkbox => {
			checkbox.addEventListener('change', updateVehicleDetails);
		});
		updateVehicleDetails();
	}

	document.addEventListener('DOMContentLoaded', () => {
		const form = document.getElementById('riderSignup');
		const errorDiv = document.getElementById('errorDisplay');
		const phoneInput = document.getElementById('riderPhone');
		const emailInput = document.getElementById('riderEmail');

		if (emailInput) {
			emailInput.addEventListener('input', e => {
				const isValid = validateEmail(e.target.value);
				e.target.style.borderColor = e.target.value && !isValid ? 'var(--error)' : '#e5e5e5';
			});
		}

		if (phoneInput) {
			phoneInput.addEventListener('input', e => {
				let value = e.target.value;
				if (!value.startsWith('+63')) {
					value = '+63 ' + value.replace(/^\+63\s*/, '');
					e.target.value = value;
				}
				if (value.length < 4) {
					e.target.value = '+63 ';
				}
				const isValid = validatePhoneNumber(e.target.value);
				e.target.style.borderColor = e.target.value && !isValid ? 'var(--error)' : '#e5e5e5';
			});

			phoneInput.addEventListener('keydown', e => {
				if (e.key === 'Backspace' && e.target.selectionStart <= 4) {
					e.preventDefault();
				}
			});
		}

		document.querySelectorAll('.form-input, .form-select').forEach(input => {
			input.addEventListener('input', () => {
				if (errorDiv) {
					errorDiv.style.display = 'none';
					errorDiv.textContent = '';
				}
			});
		});

		if (form) {
			form.addEventListener('submit', e => {
				e.preventDefault();
				updateServiceArea();

				setTimeout(() => {
					const formData = new FormData(form);
					const firstName = formData.get('first_name')?.trim();
					const lastName = formData.get('last_name')?.trim();
					const email = formData.get('email')?.trim();
					const phone = formData.get('phone')?.trim();
					const password = formData.get('password');
					const confirmPassword = formData.get('confirm_password');
					const licenseNumber = formData.get('license_number')?.trim();
					const vehicleTypes = formData.getAll('vehicle_type');
					const region = formData.get('region');
					const provinces = Array.from(document.querySelectorAll('input[name="province"]:checked')).map(cb => cb.value);
					const tnc = formData.get('tnc');

					if (errorDiv) {
						errorDiv.style.display = 'none';
						errorDiv.textContent = '';
					}

					const requiredFields = [firstName, lastName, email, phone, password, confirmPassword, licenseNumber];
					if (requiredFields.some(value => !value)) {
						if (errorDiv) {
							errorDiv.textContent = 'All fields are required';
							errorDiv.style.display = 'block';
						}
						return;
					}

					if (!validateEmail(email)) {
						if (errorDiv) {
							errorDiv.textContent = 'Please enter a valid email address';
							errorDiv.style.display = 'block';
						}
						return;
					}

					if (!validatePhoneNumber(phone || '')) {
						if (errorDiv) {
							errorDiv.textContent = 'Please enter a valid phone number';
							errorDiv.style.display = 'block';
						}
						return;
					}

					if (password !== confirmPassword) {
						if (errorDiv) {
							errorDiv.textContent = 'Passwords do not match';
							errorDiv.style.display = 'block';
						}
						return;
					}

					const passwordRegex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$/;
					if (!passwordRegex.test(password || '')) {
						if (errorDiv) {
							errorDiv.textContent = 'Password must be at least 6 characters and contain both letters and numbers';
							errorDiv.style.display = 'block';
						}
						return;
					}

					if (!vehicleTypes.length) {
						if (errorDiv) {
							errorDiv.textContent = 'Please select at least one vehicle type';
							errorDiv.style.display = 'block';
						}
						return;
					}

					if (!region) {
						if (errorDiv) {
							errorDiv.textContent = 'Please select a region';
							errorDiv.style.display = 'block';
						}
						return;
					}

					const serviceAreas = [region, ...provinces];
					const finalServiceArea = serviceAreas.join(',');
					if (!finalServiceArea) {
						if (errorDiv) {
							errorDiv.textContent = 'Service area validation failed. Please try again.';
							errorDiv.style.display = 'block';
						}
						return;
					}

					formData.set('service_area', finalServiceArea);
					const serviceAreaInput = document.getElementById('serviceAreaInput');
					if (serviceAreaInput) {
						serviceAreaInput.value = finalServiceArea;
					}

					if (!tnc) {
						if (errorDiv) {
							errorDiv.textContent = 'Please agree to the Terms & Conditions to continue';
							errorDiv.style.display = 'block';
						}
						return;
					}

					const submitBtn = form.querySelector('button[type="submit"]');
					const originalText = submitBtn.textContent;
					submitBtn.disabled = true;
					submitBtn.textContent = 'Sending OTP...';

					fetch('/signup/rider', {
						method: 'POST',
						body: formData
					})
						.then(response => response.json())
						.then(data => {
							if (data.success) {
								showNotification('✅ Rider account created! Redirecting to verification...', 'success');
								setTimeout(() => {
									window.location.href = data.redirect;
								}, 1500);
							} else {
								if (data.message && (data.message.includes('email') || data.message.includes('Email') || data.message.includes('phone') || data.message.includes('Phone number'))) {
									showNotification(data.message, 'error');
								} else if (errorDiv) {
									errorDiv.textContent = data.message || 'An error occurred';
									errorDiv.style.display = 'block';
								}
								submitBtn.disabled = false;
								submitBtn.textContent = originalText;
							}
						})
						.catch(error => {
							if (errorDiv) {
								errorDiv.textContent = 'An error occurred. Please try again later.';
								errorDiv.style.display = 'block';
							}
							console.error('Error:', error);
							submitBtn.disabled = false;
							submitBtn.textContent = originalText;
						});
				}, 100);
			});
		}

		initializeVehicleListeners();
		updateServiceArea();
	});
</script>
</body>
</html>
