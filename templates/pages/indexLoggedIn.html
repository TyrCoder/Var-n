<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Var√≥n ‚Äî Elegant Men's Fashion</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600&family=Commissioner:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
<<<<<<< HEAD
    <style>
      .user-dropdown {
        position: relative;
        display: inline-block;
      }
      .user-button {
        background: none;
        border: none;
        color: #fff;
        cursor: pointer;
        padding: 8px 12px;
        font-size: 14px;
        border-radius: 4px;
        transition: background 0.2s;
      }
      .user-button:hover {
        background: rgba(255,255,255,0.1);
      }
      .dropdown-content {
        display: none;
        position: absolute;
        right: 0;
        top: 100%;
        background: #fff;
        min-width: 160px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        border-radius: 8px;
        margin-top: 8px;
        z-index: 1000;
        overflow: hidden;
      }
      .dropdown-content.show {
        display: block;
      }
      .dropdown-content a {
        color: #0a0a0a;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
        transition: background 0.2s;
      }
      .dropdown-content a:hover {
        background: #f3f4f6;
      }
      /* Floating Cart Button */
      .floating-cart {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 60px;
        height: 60px;
        background: #0a0a0a;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        z-index: 999;
        transition: all 0.3s ease;
      }
      .floating-cart:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 20px rgba(0,0,0,0.4);
      }
      .floating-cart svg {
        width: 24px;
        height: 24px;
        fill: #fff;
      }
      .floating-cart-badge {
        position: absolute;
        top: -5px;
        right: -5px;
        background: #ef4444;
        color: #fff;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: 600;
        border: 2px solid #fff;
      }
      @media (max-width: 768px) {
        .floating-cart {
          bottom: 20px;
          right: 20px;
          width: 50px;
          height: 50px;
        }
        .floating-cart svg {
          width: 20px;
          height: 20px;
        }
      }
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
=======
>>>>>>> parent of 1c35c95 (malapit na mga bes)
  </head>
  <body>
    <header class="site-header">
      <button class="menu-toggle" aria-label="Toggle menu" aria-expanded="false">‚ò∞</button>
      <h1 class="brand"><a href="javascript:void(0)" onclick="showSection('home')" style="color:#fff;text-decoration:none">Var√≥n</a></h1>
      <nav class="top-nav" id="topNav">
<<<<<<< HEAD
        <a href="javascript:void(0)" onclick="showSection('myOrders')" id="myOrdersLink">My Orders</a>
        <a href="javascript:void(0)" onclick="showSection('browse')">Browse</a>
        <a href="javascript:void(0)" onclick="showSection('journal')">Journal</a>
        <a href="javascript:void(0)" onclick="showSection('about')">About</a>
        <div class="user-dropdown">
          <button class="user-button" onclick="toggleUserDropdown(event)" style="background:none;border:none;color:#fff;cursor:pointer;padding:8px 12px;font-size:14px;display:flex;align-items:center;gap:4px">
            <span id="buyerFirstName">User</span> ‚ñæ
          </button>
          <div id="userDropdown" class="dropdown-content">
            <a href="#" onclick="confirmLogout(event); return false;">Logout</a>
          </div>
        </div>
=======
        <a href="javascript:void(0)" onclick="showSection('trackOrder')">Track Your Order</a>
        <a href="javascript:void(0)" onclick="showSection('myOrders')" id="myOrdersLink" style="display:none">My Orders</a>
        <a href="javascript:void(0)" onclick="showSection('browse')">Browse</a>
        <a href="javascript:void(0)" onclick="showSection('journal')">Journal</a>
        <a href="javascript:void(0)" onclick="showSection('about')">About</a>
        <span class="welcome-msg">Welcome, <span id="buyerFirstName"></span></span>
        <a href="javascript:void(0)" onclick="confirmLogout()" class="account">Logout</a>
        <a href="#" onclick="openModal('cartModal')" id="cartToggle" class="account" style="position:relative;display:inline-flex;align-items:center;gap:8px">
          Cart 
          <span id="cartCount" style="background:#fff;color:#0a0a0a;border-radius:12px;padding:2px 8px;font-size:12px;font-weight:600;min-width:24px;text-align:center">0</span>
        </a>
>>>>>>> parent of 1c35c95 (malapit na mga bes)
      </nav>
    </header>

    <!-- Hero Section (Home Only) -->
<<<<<<< HEAD

    <!-- Hero Section (Home Only) -->
    <section class="hero" id="heroSection" style="display:none">
=======
    <section class="hero" id="heroSection">
>>>>>>> parent of 1c35c95 (malapit na mga bes)
      <div class="hero-inner container">
        <div class="hero-copy">
          <h2>Refined Elegance for the Modern Gentleman</h2>
          <p class="muted">Where sophistication meets contemporary style. Each piece is meticulously crafted to elevate your presence.</p>
          <p><a href="javascript:void(0)" onclick="showSection('browse')" class="btn-cta">Discover Collection</a></p>
        </div>
        <div class="hero-media" aria-hidden="true"></div>
      </div>
    </section>

    <!-- Featured Products Section (Home) -->
    <section id="home" class="content-section" style="display:none">
      <div class="container">
        <!-- Categories Quick Access -->
        <div style="margin:40px 0 30px">
          <h3 style="text-align:center;margin-bottom:20px;font-size:18px;color:#666">Shop by Category</h3>
          <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:16px;max-width:900px;margin:0 auto 40px">
            <button onclick="showSection('browse');setTimeout(() => filterByCategory('suits-blazers'), 100)" style="padding:16px;background:#fff;border:2px solid #e5e7eb;border-radius:12px;cursor:pointer;transition:all 0.2s;text-align:center" onmouseover="this.style.borderColor='#0a0a0a';this.style.transform='translateY(-2px)'" onmouseout="this.style.borderColor='#e5e7eb';this.style.transform='translateY(0)'">
              <div style="font-size:24px;margin-bottom:8px">üëî</div>
              <div style="font-weight:600;font-size:14px;color:#0a0a0a">Suits & Blazers</div>
            </button>
            <button onclick="showSection('browse');setTimeout(() => filterByCategory('shoes-accessories'), 100)" style="padding:16px;background:#fff;border:2px solid #e5e7eb;border-radius:12px;cursor:pointer;transition:all 0.2s;text-align:center" onmouseover="this.style.borderColor='#0a0a0a';this.style.transform='translateY(-2px)'" onmouseout="this.style.borderColor='#e5e7eb';this.style.transform='translateY(0)'">
              <div style="font-size:24px;margin-bottom:8px">üëû</div>
              <div style="font-weight:600;font-size:14px;color:#0a0a0a">Shoes & Accessories</div>
            </button>
            <button onclick="showSection('browse');setTimeout(() => filterByCategory('outerwear-jackets'), 100)" style="padding:16px;background:#fff;border:2px solid #e5e7eb;border-radius:12px;cursor:pointer;transition:all 0.2s;text-align:center" onmouseover="this.style.borderColor='#0a0a0a';this.style.transform='translateY(-2px)'" onmouseout="this.style.borderColor='#e5e7eb';this.style.transform='translateY(0)'">
              <div style="font-size:24px;margin-bottom:8px">üß•</div>
              <div style="font-weight:600;font-size:14px;color:#0a0a0a">Outerwear</div>
            </button>
            <button onclick="showSection('browse');setTimeout(() => filterByCategory('casual-shirts-pants'), 100)" style="padding:16px;background:#fff;border:2px solid #e5e7eb;border-radius:12px;cursor:pointer;transition:all 0.2s;text-align:center" onmouseover="this.style.borderColor='#0a0a0a';this.style.transform='translateY(-2px)'" onmouseout="this.style.borderColor='#e5e7eb';this.style.transform='translateY(0)'">
              <div style="font-size:24px;margin-bottom:8px">üëï</div>
              <div style="font-weight:600;font-size:14px;color:#0a0a0a">Casual Wear</div>
            </button>
            <button onclick="showSection('browse');setTimeout(() => filterByCategory('activewear-fitness'), 100)" style="padding:16px;background:#fff;border:2px solid #e5e7eb;border-radius:12px;cursor:pointer;transition:all 0.2s;text-align:center" onmouseover="this.style.borderColor='#0a0a0a';this.style.transform='translateY(-2px)'" onmouseout="this.style.borderColor='#e5e7eb';this.style.transform='translateY(0)'">
              <div style="font-size:24px;margin-bottom:8px">üèÉ</div>
              <div style="font-weight:600;font-size:14px;color:#0a0a0a">Activewear</div>
            </button>
            <button onclick="showSection('browse');setTimeout(() => filterByCategory('grooming'), 100)" style="padding:16px;background:#fff;border:2px solid #e5e7eb;border-radius:12px;cursor:pointer;transition:all 0.2s;text-align:center" onmouseover="this.style.borderColor='#0a0a0a';this.style.transform='translateY(-2px)'" onmouseout="this.style.borderColor='#e5e7eb';this.style.transform='translateY(0)'">
              <div style="font-size:24px;margin-bottom:8px">üß¥</div>
              <div style="font-weight:600;font-size:14px;color:#0a0a0a">Grooming</div>
            </button>
          </div>
        </div>

        <h2 style="margin:40px 0 30px;text-align:center">Featured Collection</h2>
        <div id="featuredGrid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px;margin-bottom:40px">
          <!-- Featured products will be loaded here from database -->
        </div>
        <div style="text-align:center">
          <a href="javascript:void(0)" onclick="showSection('browse')" class="btn-cta">View All Products</a>
        </div>
      </div>
    </section>



    <!-- Content Sections -->
    <div id="trackOrder" class="content-section" style="display:none">
      <div class="container" style="max-width:900px;margin:40px auto;padding:20px">
        <h2 style="margin-bottom:24px;text-align:center">Track Your Orders</h2>
        
        <!-- Order Tracking Search -->
        <div style="background:#fff;padding:30px;border-radius:12px;box-shadow:0 4px 6px rgba(0,0,0,0.1);margin-bottom:30px">
          <form id="trackingForm" onsubmit="handleTrackOrder(event)" style="display:flex;gap:12px;align-items:flex-end">
            <div style="flex:1">
              <label style="display:block;margin-bottom:8px;font-weight:500">Order Number</label>
              <input type="text" id="trackOrderNumber" placeholder="Enter your order number" style="width:100%;padding:12px;border:1px solid #ddd;border-radius:6px" required>
            </div>
            <div>
              <label style="display:block;margin-bottom:8px;font-weight:500">Email</label>
              <input type="email" id="trackEmail" placeholder="Enter your email address" style="width:100%;padding:12px;border:1px solid #ddd;border-radius:6px" required>
            </div>
            <button type="submit" class="btn-cta" style="width:100%">Track Order</button>
          </form>
          <div id="trackingResult" style="display:none;margin-top:20px;padding:20px;background:#f0f9ff;border-radius:8px;border-left:4px solid #3b82f6">
            <h3 style="margin-top:0">Order Details</h3>
            <div id="trackingResultContent"></div>
          </div>
        </div>
      </div>
    </div>

    <div id="myOrders" class="content-section" style="display:none">
      <div class="container" style="max-width:900px;margin:40px auto;padding:20px">
        <h2 style="margin-bottom:24px;text-align:center">My Orders</h2>
        <div id="myOrdersList" style="display:grid;gap:16px">
          <!-- Orders will be loaded here -->
          <p style="text-align:center;color:#999">Loading your orders...</p>
        </div>
      </div>
    </div>

    <div id="browse" class="content-section" style="display:none">
      <div class="container">
        <div style="margin:24px 0">
          <h2 style="margin:0 0 24px">Men</h2>
          <div style="display:flex;gap:12px;align-items:center;margin-bottom:24px;overflow-x:auto;padding-bottom:12px">
            <span style="color:#666;font-weight:500;white-space:nowrap">Genres:</span>
            <button class="genre-filter" data-category="all" onclick="filterByCategory('all')" style="padding:8px 16px;border:2px solid #0a0a0a;background:#0a0a0a;color:#fff;border-radius:6px;cursor:pointer;font-size:14px;white-space:nowrap;transition:all 0.2s">All</button>
            <button class="genre-filter" data-category="suits-blazers" onclick="filterByCategory('suits-blazers')" style="padding:8px 16px;border:2px solid #ddd;background:#fff;color:#0a0a0a;border-radius:6px;cursor:pointer;font-size:14px;white-space:nowrap;transition:all 0.2s">Suits & Blazers</button>
            <button class="genre-filter" data-category="shoes-accessories" onclick="filterByCategory('shoes-accessories')" style="padding:8px 16px;border:2px solid #ddd;background:#fff;color:#0a0a0a;border-radius:6px;cursor:pointer;font-size:14px;white-space:nowrap;transition:all 0.2s">Shoes & Accessories</button>
            <button class="genre-filter" data-category="outerwear-jackets" onclick="filterByCategory('outerwear-jackets')" style="padding:8px 16px;border:2px solid #ddd;background:#fff;color:#0a0a0a;border-radius:6px;cursor:pointer;font-size:14px;white-space:nowrap;transition:all 0.2s">Outerwear & Jackets</button>
            <button class="genre-filter" data-category="casual-shirts-pants" onclick="filterByCategory('casual-shirts-pants')" style="padding:8px 16px;border:2px solid #ddd;background:#fff;color:#0a0a0a;border-radius:6px;cursor:pointer;font-size:14px;white-space:nowrap;transition:all 0.2s">Casual Wear</button>
            <button class="genre-filter" data-category="activewear-fitness" onclick="filterByCategory('activewear-fitness')" style="padding:8px 16px;border:2px solid #ddd;background:#fff;color:#0a0a0a;border-radius:6px;cursor:pointer;font-size:14px;white-space:nowrap;transition:all 0.2s">Activewear</button>
            <button class="genre-filter" data-category="grooming" onclick="filterByCategory('grooming')" style="padding:8px 16px;border:2px solid #ddd;background:#fff;color:#0a0a0a;border-radius:6px;cursor:pointer;font-size:14px;white-space:nowrap;transition:all 0.2s">Grooming</button>
          </div>
        </div>
        <div id="browseGrid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px">
          <!-- Products will be loaded here -->
        </div>
      </div>
    </div>

    <div id="journal" class="content-section" style="display:none">
      <div class="container">
        <h2 style="margin:24px 0">Style Journal</h2>
        <p style="color:#666;margin-bottom:30px">Discover the latest trends, style guides, and fashion insights from Var√≥n.</p>
        
        <div id="journalArticles" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:24px">
          <!-- Default articles while database is being set up -->
          <article style="background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 4px rgba(0,0,0,0.1)">
            <div style="height:200px;background:#f5f5f5;background-image:url('https://images.unsplash.com/photo-1521334884684-d80222895322?q=80&w=800&auto=format&fit=crop');background-size:cover"></div>
            <div style="padding:20px">
              <div style="display:flex;gap:10px;margin-bottom:10px">
                <span style="font-size:12px;color:#999">November 13, 2025</span>
                <span style="font-size:12px;color:#10b981;font-weight:600">STYLE GUIDE</span>
              </div>
              <h3 style="margin:0 0 10px">Style Guide: Fall 2025</h3>
              <p style="margin:0;color:#666;line-height:1.5;font-size:14px">Explore our comprehensive guide to fall fashion trends and essential pieces for your wardrobe. Discover the perfect balance between comfort and elegance.</p>
              <a href="#" class="btn-cta" style="display:inline-block;margin-top:16px;font-size:14px;padding:8px 20px">Read More</a>
            </div>
          </article>
          
          <article style="background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 4px rgba(0,0,0,0.1)">
            <div style="height:200px;background:#f5f5f5;background-image:url('https://images.unsplash.com/photo-1610963876305-c8e7cb43a09b?q=80&w=800&auto=format&fit=crop');background-size:cover"></div>
            <div style="padding:20px">
              <div style="display:flex;gap:10px;margin-bottom:10px">
                <span style="font-size:12px;color:#999">November 10, 2025</span>
                <span style="font-size:12px;color:#10b981;font-weight:600">SUSTAINABILITY</span>
              </div>
              <h3 style="margin:0 0 10px">Sustainable Fashion</h3>
              <p style="margin:0;color:#666;line-height:1.5;font-size:14px">Learn about our commitment to sustainable practices and ethical fashion production. Every choice we make considers the environment and our community.</p>
              <a href="#" class="btn-cta" style="display:inline-block;margin-top:16px;font-size:14px;padding:8px 20px">Read More</a>
            </div>
          </article>
          
          <article style="background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 4px rgba(0,0,0,0.1)">
            <div style="height:200px;background:#f5f5f5;background-image:url('https://images.unsplash.com/photo-1617347454431-f49d7ff5c3b1?q=80&w=800&auto=format&fit=crop');background-size:cover"></div>
            <div style="padding:20px">
              <div style="display:flex;gap:10px;margin-bottom:10px">
                <span style="font-size:12px;color:#999">November 8, 2025</span>
                <span style="font-size:12px;color:#10b981;font-weight:600">FASHION TIPS</span>
              </div>
              <h3 style="margin:0 0 10px">The Art of Layering</h3>
              <p style="margin:0;color:#666;line-height:1.5;font-size:14px">Master the technique of layering your outfits for a sophisticated and versatile look that works for any occasion this season.</p>
              <a href="#" class="btn-cta" style="display:inline-block;margin-top:16px;font-size:14px;padding:8px 20px">Read More</a>
            </div>
          </article>

          <article style="background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 4px rgba(0,0,0,0.1)">
            <div style="height:200px;background:#f5f5f5;background-image:url('https://images.unsplash.com/photo-1489987707025-afc232f7ea0f?q=80&w=800&auto=format&fit=crop');background-size:cover"></div>
            <div style="padding:20px">
              <div style="display:flex;gap:10px;margin-bottom:10px">
                <span style="font-size:12px;color:#999">November 5, 2025</span>
                <span style="font-size:12px;color:#10b981;font-weight:600">BRAND STORY</span>
              </div>
              <h3 style="margin:0 0 10px">Craftsmanship Meets Innovation</h3>
              <p style="margin:0;color:#666;line-height:1.5;font-size:14px">Discover how traditional craftsmanship and modern innovation come together to create timeless pieces that define the Var√≥n aesthetic.</p>
              <a href="#" class="btn-cta" style="display:inline-block;margin-top:16px;font-size:14px;padding:8px 20px">Read More</a>
            </div>
          </article>
        </div>
      </div>
    </div>

    <div id="about" class="content-section" style="display:none">
      <div class="container" style="max-width:800px;margin:40px auto;padding:20px">
        <h2 style="margin-bottom:24px;text-align:center">About Var√≥n</h2>
        <div style="background:#fff;padding:30px;border-radius:12px;box-shadow:0 4px 6px rgba(0,0,0,0.1)">
          <p style="line-height:1.6;margin:0 0 20px">Var√≥n is a modern menswear brand focused on creating timeless pieces that combine style, comfort, and sustainability. Our mission is to provide high-quality clothing that stands the test of time.</p>
          <p style="line-height:1.6;margin:0 0 20px">Founded in 2025, we've been dedicated to crafting minimal designs that emphasize quality materials and expert craftsmanship. Every piece in our collection is thoughtfully designed and responsibly made.</p>
          <p style="line-height:1.6;margin:0">Our commitment to sustainability and ethical fashion drives everything we do. We work closely with our partners to ensure responsible production methods and fair labor practices throughout our supply chain.</p>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <main class="container" id="mainContent">
      <section class="toolbar">
        <div class="filters">
          <button data-filter="men" class="active">Men</button>
        </div>
        <div class="genres">
          <label>Genres:</label>
          <button data-genre="all" class="genre active">All</button>
          <button data-genre="shirts" class="genre">Shirts</button>
          <button data-genre="pants" class="genre">Pants</button>
          <button data-genre="shorts" class="genre">Shorts</button>
          <button data-genre="jackets" class="genre">Jackets</button>
          <button data-genre="shoes" class="genre">Shoes</button>
          <button data-genre="accessories" class="genre">Accessories</button>
          <button data-genre="formal" class="genre">Formal</button>
          <button data-genre="casual" class="genre">Casual</button>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="footer-grid">
        <div>
          <h4>Var√≥n</h4>
          <p class="muted">Minimal, responsibly-made apparel. Clean silhouettes and timeless staples.</p>
        </div>
        <div>
          <h5>Shop</h5>
          <ul>
            <li><a href="#">All Products</a></li>
            <li><a href="#">New Arrivals</a></li>
            <li><a href="#">Best Sellers</a></li>
          </ul>
        </div>
        <div>
          <h5>Genres</h5>
          <ul>
            <li><a href="#">Tops</a></li>
            <li><a href="#">Bottoms</a></li>
            <li><a href="#">Outerwear</a></li>
            <li><a href="#">Accessories</a></li>
          </ul>
        </div>
        <div>
          <h5>Partners</h5>
          <ul>
            <li><a href="{{ url_for('signup_seller') }}" id="footerSeller">Register as a seller</a></li>
            <li><a href="{{ url_for('signup_rider') }}" id="footerRider">Register as a rider</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="footer-brand">Var√≥n ‚Äî Minimal Apparel</div>
        <small>¬© <span class="muted">2025</span></small>
      </div>
    </footer>

    <!-- Cart Modal -->
    <div id="cartModal" class="modal" aria-hidden="true" style="display:none;z-index:9999">
      <div class="cart-card" style="z-index:10000">
        <button onclick="closeModal('cartModal')" class="cart-close-btn" aria-label="Close cart">√ó</button>
        <h2 style="text-align:left;margin-bottom:20px">Your Cart</h2>
        <div id="cartList" class="cart-list">
          <!-- Empty cart state -->
          <div class="empty-cart-state" style="text-align:center;padding:60px 20px">
            <div style="font-size:80px;color:#ddd;margin-bottom:16px">
              <svg width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="display:inline-block">
                <path d="M9 2L7.17 4H3c-.55 0-1 .45-1 1s.45 1 1 1h1l1.6 8.6c.18 1 1.05 1.73 2.06 1.73h7.72c1.01 0 1.88-.73 2.06-1.73L19 6h1c.55 0 1-.45 1-1s-.45-1-1-1h-4.17L14 2H9z"/>
                <circle cx="9" cy="20" r="1"/>
                <circle cx="16" cy="20" r="1"/>
              </svg>
            </div>
            <h3 style="font-size:18px;font-weight:400;color:#999;margin:0 0 8px">Your cart is empty</h3>
            <p style="font-size:14px;color:#bbb;margin:0">Add some products to get started!</p>
          </div>
        </div>
        <div class="cart-totals">
          <div style="padding:24px 0;border-top:1px solid #eee">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
              <span style="color:#666;font-size:15px">Subtotal:</span>
              <span style="font-size:16px;font-weight:500" id="cartSubtotal">‚Ç±0.00</span>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:24px">
              <span style="font-size:18px;font-weight:600;color:#0a0a0a">Total:</span>
              <span style="font-size:20px;font-weight:600;color:#0a0a0a" id="cartTotal">‚Ç±0.00</span>
            </div>
          </div>
          <div style="display:flex;gap:12px">
<<<<<<< HEAD
            <button onclick="confirmClearCart()" class="btn-secondary" style="flex:1;padding:14px;font-size:15px;font-weight:500;border-radius:6px;border:1px solid #e0e0e0;background:#fff;color:#0a0a0a;cursor:pointer;transition:all 0.2s" onmouseover="this.style.background='#f8f8f8'" onmouseout="this.style.background='#fff'">CLEAR CART</button>
            <button onclick="proceedToCheckout()" class="btn-cta" style="flex:1;padding:14px;font-size:15px;font-weight:500;border-radius:6px;background:#0a0a0a;color:#fff;border:none;cursor:pointer;transition:all 0.2s" onmouseover="this.style.background='#2d2d2d'" onmouseout="this.style.background='#0a0a0a'">PROCEED TO CHECKOUT</button>
=======
            <button onclick="clearCart()" class="btn-secondary" style="flex:1;padding:14px;font-size:15px;font-weight:500;border-radius:6px;border:1px solid #e0e0e0;background:#fff;color:#0a0a0a;cursor:pointer;transition:all 0.2s" onmouseover="this.style.background='#f8f8f8'" onmouseout="this.style.background='#fff'">CLEAR CART</button>
            <button id="checkoutBtn" class="btn-cta" style="flex:1;padding:14px;font-size:15px;font-weight:500;border-radius:6px;background:#0a0a0a;color:#fff;border:none;cursor:pointer;transition:all 0.2s" onmouseover="this.style.background='#2d2d2d'" onmouseout="this.style.background='#0a0a0a'">PROCEED TO CHECKOUT</button>
>>>>>>> parent of 1c35c95 (malapit na mga bes)
          </div>
        </div>
      </div>
    </div>

    <!-- Confirm Clear Cart Modal -->
    <div id="clearModal" class="modal" aria-hidden="true" style="display:none">
      <div class="modal-panel">
        <button class="modal-close" onclick="closeModal('clearModal')">√ó</button>
        <h2 style="margin:0 0 8px">Clear Cart?</h2>
        <p style="margin:0 0 18px;color:var(--muted)">Are you sure you want to remove all items from your cart?</p>
        <div style="display:flex;gap:8px;justify-content:flex-end">
          <button onclick="closeModal('clearModal');setTimeout(() => openModal('cartModal'), 350)" class="btn-cta" style="background:#f6f6f6;color:#0a0a0a">Cancel</button>
          <button onclick="clearCartConfirmed()" class="btn-cta" style="background:#ef4444">Yes, Clear Cart</button>
        </div>
      </div>
    </div>


    <!-- Logout Confirmation Modal -->
    <div id="logoutModal" class="modal" aria-hidden="true" style="display:none">
      <div class="modal-panel">
        <button class="modal-close" onclick="closeLogoutModal()">√ó</button>
        <h2 style="margin:0 0 8px">Confirm Logout</h2>
        <p style="margin:0 0 18px;color:var(--muted)">Are you sure you want to logout? You will need to log in again to access your account.</p>
        <div style="display:flex;gap:8px;justify-content:flex-end">
          <button onclick="closeLogoutModal()" class="btn-cta" style="background:#f6f6f6;color:#0a0a0a">Cancel</button>
          <button onclick="proceedLogout()" class="btn-cta" style="background:#ef4444;color:#fff">Yes, Logout</button>
        </div>
      </div>
    </div>

    <div id="snackbar" class="snackbar" role="status" aria-live="polite">Added to cart</div>
    
<<<<<<< HEAD
    <!-- Floating Cart Button -->
    <div class="floating-cart" onclick="console.log('Cart button clicked!'); openModal('cartModal')" title="View Cart">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="9" cy="21" r="1"/>
        <circle cx="20" cy="21" r="1"/>
        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
      </svg>
      <span class="floating-cart-badge" id="cartCount">0</span>
    </div>
    
=======
>>>>>>> parent of 1c35c95 (malapit na mga bes)
    <div class="overlay" id="overlay"></div>
    <aside class="sidebar" id="sidebar">
      <nav class="sidebar-nav">
        <a href="javascript:void(0)" onclick="showSection('trackOrder')">Track Your Order</a>
        <a href="javascript:void(0)" onclick="showSection('myOrders')" id="myOrdersLinkSidebar" style="display:none">My Orders</a>
        <a href="javascript:void(0)" onclick="showSection('browse')">Browse</a>
        <a href="javascript:void(0)" onclick="showSection('journal')">Journal</a>
        <a href="javascript:void(0)" onclick="showSection('about')">About</a>
        <span class="welcome-msg">Welcome, <span id="buyerFirstNameSidebar"></span></span>
        <a href="#" onclick="confirmLogout(event); return false;" class="account">Logout</a>
        <a href="#" onclick="openModal('cartModal')" class="account" style="position:relative;display:inline-flex;align-items:center;gap:8px">
          Cart 
          <span id="cartCountSidebar" style="background:#fff;color:#0a0a0a;border-radius:12px;padding:2px 8px;font-size:12px;font-weight:600;min-width:24px;text-align:center">0</span>
        </a>
      </nav>
    </aside>

    <script>
<<<<<<< HEAD
    // User dropdown toggle
    function toggleUserDropdown(event) {
      if (event) {
        event.stopPropagation();
      }
      const dropdown = document.getElementById('userDropdown');
      if (dropdown) {
        dropdown.classList.toggle('show');
      }
    }

    // Close dropdown when clicking outside
    document.addEventListener('click', function(e) {
      const dropdown = document.getElementById('userDropdown');
      const userButton = e.target.closest('.user-button');
      
      // Don't close if clicking the button (toggle handles that)
      if (userButton) {
        return;
      }
      
      // Close if clicking outside and dropdown is open
      if (dropdown && dropdown.classList.contains('show')) {
        dropdown.classList.remove('show');
      }
    });

=======
>>>>>>> parent of 1c35c95 (malapit na mga bes)
    // Logout confirmation function
    function confirmLogout(event) {
      // Prevent default link behavior
      if (event) {
        event.preventDefault();
        event.stopPropagation();
      }
      
      // Show logout modal
      const modal = document.getElementById('logoutModal');
      if (modal) {
        modal.style.display = 'flex';
        modal.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
      }
    }

    function closeLogoutModal() {
      const modal = document.getElementById('logoutModal');
      if (modal) {
        modal.style.display = 'none';
        modal.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
      }
    }

    function proceedLogout() {
      window.location.href = '/logout';
    }
<<<<<<< HEAD
    
    // Cart Modal Functions
    async function renderCartItems() {
        console.log('renderCartItems called');
        if (!window.VaronCart) {
            console.error('VaronCart not loaded');
            alert('Cart system not loaded. Please refresh the page.');
            return;
        }

        console.log('VaronCart is available:', window.VaronCart);
        const cartList = document.getElementById('cartList');
        console.log('Cart list element:', cartList);
        
        const items = await VaronCart.get();
        console.log('Cart items retrieved:', items);
        
        if (!items || items.length === 0) {
            cartList.innerHTML = `
                <div class="empty-cart-state" style="text-align:center;padding:60px 20px">
                    <div style="font-size:80px;color:#ddd;margin-bottom:16px">
                        <svg width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="display:inline-block">
                            <path d="M9 2L7.17 4H3c-.55 0-1 .45-1 1s.45 1 1 1h1l1.6 8.6c.18 1 1.05 1.73 2.06 1.73h7.72c1.01 0 1.88-.73 2.06-1.73L19 6h1c.55 0 1-.45 1-1s-.45-1-1-1h-4.17L14 2H9z"/>
                            <circle cx="9" cy="20" r="1"/>
                            <circle cx="16" cy="20" r="1"/>
                        </svg>
                    </div>
                    <h3 style="font-size:18px;font-weight:400;color:#999;margin:0 0 8px">Your cart is empty</h3>
                    <p style="font-size:14px;color:#bbb;margin:0">Add some products to get started!</p>
                </div>
            `;
            updateCartTotals(0);
            return;
        }

        let html = '';
        items.forEach(item => {
            const imageUrl = item.image_url || 'https://images.unsplash.com/photo-1495121605193-b116b5b09f06?q=80&w=200&auto=format&fit=crop';
            const itemTotal = (parseFloat(item.price) * parseInt(item.quantity)).toFixed(2);
            const sizeColor = [];
            if (item.size) sizeColor.push(`Size: ${item.size}`);
            if (item.color) sizeColor.push(`Color: ${item.color}`);
            const variant = sizeColor.length > 0 ? sizeColor.join(', ') : '';

            html += `
                <div class="cart-item" style="display:flex;gap:16px;padding:16px;border-bottom:1px solid #f0f0f0;align-items:center">
                    <img src="${imageUrl}" alt="${item.name}" style="width:80px;height:80px;object-fit:cover;border-radius:8px;flex-shrink:0">
                    <div style="flex:1;min-width:0">
                        <h4 style="margin:0 0 4px;font-size:15px;font-weight:500;color:#0a0a0a">${item.name}</h4>
                        ${variant ? `<p style="margin:0 0 8px;font-size:13px;color:#666">${variant}</p>` : ''}
                        <div style="display:flex;align-items:center;gap:12px">
                            <div style="display:flex;align-items:center;border:1px solid #e0e0e0;border-radius:6px;overflow:hidden">
                                <button onclick="updateCartQuantity(${item.cart_id}, ${item.quantity - 1})" style="padding:6px 12px;background:#fff;border:none;cursor:pointer;font-size:18px;color:#666;transition:background 0.2s" onmouseover="this.style.background='#f8f8f8'" onmouseout="this.style.background='#fff'">‚àí</button>
                                <span style="padding:6px 16px;font-size:14px;font-weight:500;min-width:40px;text-align:center">${item.quantity}</span>
                                <button onclick="updateCartQuantity(${item.cart_id}, ${item.quantity + 1})" style="padding:6px 12px;background:#fff;border:none;cursor:pointer;font-size:18px;color:#666;transition:background 0.2s" onmouseover="this.style.background='#f8f8f8'" onmouseout="this.style.background='#fff'">+</button>
                            </div>
                            <button onclick="removeCartItem(${item.cart_id})" style="padding:6px 12px;background:#fff;border:1px solid #e0e0e0;border-radius:6px;cursor:pointer;font-size:13px;color:#ef4444;transition:all 0.2s" onmouseover="this.style.background='#fef2f2';this.style.borderColor='#ef4444'" onmouseout="this.style.background='#fff';this.style.borderColor='#e0e0e0'">Remove</button>
                        </div>
                    </div>
                    <div style="text-align:right;flex-shrink:0">
                        <p style="margin:0;font-size:16px;font-weight:600;color:#0a0a0a">‚Ç±${itemTotal}</p>
                    </div>
                </div>
            `;
        });

        cartList.innerHTML = html;
        const total = items.reduce((sum, item) => sum + (parseFloat(item.price) * parseInt(item.quantity)), 0);
        updateCartTotals(total);
    }

    function updateCartTotals(total) {
        const subtotalEl = document.getElementById('cartSubtotal');
        const totalEl = document.getElementById('cartTotal');
        if (subtotalEl) subtotalEl.textContent = `‚Ç±${total.toFixed(2)}`;
        if (totalEl) totalEl.textContent = `‚Ç±${total.toFixed(2)}`;
    }

    async function updateCartQuantity(cartId, newQuantity) {
        if (newQuantity < 1) {
            await removeCartItem(cartId);
            return;
        }
        if (window.VaronCart) {
            const success = await VaronCart.update(cartId, newQuantity);
            if (success) await renderCartItems();
        }
    }

    async function removeCartItem(cartId) {
        if (window.VaronCart) {
            const success = await VaronCart.remove(cartId);
            if (success) {
                VaronCart.showMessage('Item removed from cart', 'success');
                await renderCartItems();
            }
        }
    }

    async function confirmClearCart() {
        if (!window.VaronCart) return;
        const items = await VaronCart.get();
        if (!items || items.length === 0) {
            VaronCart.showMessage('Cart is already empty', 'error');
            return;
        }
        closeModal('cartModal');
        await openModal('clearModal');
    }

    async function clearCartConfirmed() {
        if (window.VaronCart) {
            const success = await VaronCart.clear();
            if (success) {
                VaronCart.showMessage('Cart cleared successfully', 'success');
                closeModal('clearModal');
                await openModal('cartModal');
            } else {
                closeModal('clearModal');
            }
        }
    }

    function proceedToCheckout() {
        window.location.href = '/checkout';
    }

    // Modal functions
    async function openModal(modalId) {
        console.log('Opening modal:', modalId);
        const modal = document.getElementById(modalId);
        if (modal) {
            console.log('Modal element found, displaying...');
            console.log('Modal current display:', modal.style.display);
            console.log('Modal current aria-hidden:', modal.getAttribute('aria-hidden'));
            
            modal.style.display = 'flex';
            modal.style.opacity = '1';
            modal.setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden';
            
            console.log('Modal after display:', modal.style.display);
            console.log('Modal visibility:', window.getComputedStyle(modal).display);
            
            // Force reflow to ensure animation works
            void modal.offsetWidth;
            
            // Load cart items when opening cart modal
            if (modalId === 'cartModal') {
                console.log('Loading cart items...');
                await renderCartItems();
            }
        } else {
            console.error('Modal not found:', modalId);
        }
    }

    function closeModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = '';
            
            // Wait for animation to complete before hiding
            setTimeout(() => {
                if (modal.getAttribute('aria-hidden') === 'true') {
                    modal.style.display = 'none';
                }
            }, 300);
        }
    }

    // Add quick add to cart functionality for products
    async function quickAddToCart(productId, productName, productPrice, productImage) {
      // Show loading feedback
      const snackbar = document.getElementById('snackbar');
      if(snackbar) {
        snackbar.textContent = 'Adding to cart...';
        snackbar.classList.add('show');
      }
      
      if(window.VaronCart) {
        const success = await VaronCart.add(productId, 1);
        // VaronCart.add now handles showing success/error messages
      } else {
        // Fallback if VaronCart not loaded
        if(snackbar) {
          snackbar.textContent = 'Cart system not loaded. Please refresh the page.';
          setTimeout(() => snackbar.classList.remove('show'), 3000);
        }
      }
    }

    // Function to show different sections
    function showSection(sectionId) {
      console.log('Showing section:', sectionId);
      
      // Hide all content sections
      document.querySelectorAll('.content-section').forEach(section => {
        section.style.display = 'none';
      });
      
      // Hide hero section
      const heroSection = document.getElementById('heroSection');
      if (heroSection) {
        heroSection.style.display = 'none';
      }
      
      // Hide flash sales section
      const flashSalesSection = document.getElementById('flashSalesSection');
      if (flashSalesSection) {
        flashSalesSection.style.display = 'none';
      }
      
      // Show selected section
      if (sectionId === 'home') {
        // Show hero, flash sales (if active), and featured products
        if (heroSection) {
          heroSection.style.display = 'block';
        }
        if (flashSalesSection && activeFlashSales && Object.keys(activeFlashSales).length > 0) {
          flashSalesSection.style.display = 'block';
        }
        const homeSection = document.getElementById('home');
        if (homeSection) {
          homeSection.style.display = 'block';
        }
      } else {
        const targetSection = document.getElementById(sectionId);
        if (targetSection) {
          targetSection.style.display = 'block';
        }
      }
      
      // Load data for specific sections
      if (sectionId === 'browse') {
        // Reset to "All" category when opening browse
        filterByCategory('all');
      } else if (sectionId === 'myOrders') {
        loadMyOrders();
      }
      
      // Update navigation active state
      document.querySelectorAll('.top-nav a').forEach(link => {
        link.style.color = '';
      });
      const activeLink = document.getElementById(`${sectionId}Link`);
      if (activeLink) {
        activeLink.style.color = '#ff6b6b';
      }
    }
=======
>>>>>>> parent of 1c35c95 (malapit na mga bes)

    // Fetch the buyer's first name on page load
    window.addEventListener('DOMContentLoaded', (event) => {
        // Close all modals on page load to prevent black overlay
        const allModals = document.querySelectorAll('.modal');
        allModals.forEach(modal => {
            modal.setAttribute('aria-hidden', 'true');
            modal.style.display = 'none';
        });

        fetch('/get_buyer_name')
            .then(response => response.json())
            .then(data => {
                document.getElementById('buyerFirstName').textContent = data.firstName;
                document.getElementById('buyerFirstNameSidebar').textContent = data.firstName;
            })
            .catch(error => console.error('Error fetching buyer name:', error));
        
<<<<<<< HEAD
        // Load cart count from database
        if (window.VaronCart && typeof VaronCart.updateBadge === 'function') {
            VaronCart.updateBadge();
        }
        
        // Load featured products first
        loadFeaturedProducts();
        
        // Load browse products
        loadBrowseProducts();
        
        // Load flash sales
        loadFlashSales();
=======
        // Load featured products on home
        loadFeaturedProducts();
>>>>>>> parent of 1c35c95 (malapit na mga bes)
        
        // Load user's orders for My Orders section
        loadMyOrders();
        
<<<<<<< HEAD
        // Explicitly show home section after everything is loaded
        setTimeout(() => {
          console.log('Initializing home section...');
          showSection('home');
        }, 200);
    });

    // Flash sales support
    let activeFlashSales = {};
    
    function loadFlashSales() {
      fetch('/api/active-flash-sales')
        .then(response => response.json())
        .then(data => {
          if (data.success && data.product_sales) {
            activeFlashSales = data.product_sales;
            
            const section = document.getElementById('flashSalesSection');
            const grid = document.getElementById('flashSaleGrid');
            
            if (Object.keys(activeFlashSales).length > 0 && section && grid) {
              section.style.display = 'block';
              
              // Load products that are on flash sale
              fetch('/api/products')
                .then(res => res.json())
                .then(data => {
                  if (data.success && data.products) {
                    const saleProducts = data.products.filter(p => activeFlashSales[p.id]);
                    
                    // Limit to first 6 products for table display
                    const displayProducts = saleProducts.slice(0, 6);
                    
                    grid.innerHTML = displayProducts.map(product => {
                      const sale = activeFlashSales[product.id];
                      const originalPrice = parseFloat(product.price);
                      const salePrice = parseFloat(sale.sale_price);
                      const discount = Math.round(sale.discount_percentage);
                      
                      return `
                        <div style="background:#fff;padding:16px;text-align:center;cursor:pointer;transition:transform 0.2s" 
                             onclick="window.location.href='/product/${product.id}'" 
                             onmouseover="this.style.transform='translateY(-4px)'" 
                             onmouseout="this.style.transform='translateY(0)'">
                          <div style="position:relative;margin-bottom:12px">
                            <img src="${product.image_url || 'https://images.unsplash.com/photo-1495121605193-b116b5b09f06?q=80&w=200&auto=format&fit=crop'}" 
                                 alt="${product.name}" 
                                 style="width:100%;height:150px;object-fit:cover;border-radius:8px">
                            <span style="position:absolute;top:8px;left:8px;background:#ff6b6b;color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:600">
                              ${discount}% OFF
                            </span>
                          </div>
                          <h4 style="margin:0 0 8px 0;font-size:14px;color:#333;height:40px;overflow:hidden;line-height:1.4">${product.name}</h4>
                          <div style="margin-bottom:4px">
                            <span style="color:#ff6b6b;font-size:18px;font-weight:700">‚Ç±${salePrice.toFixed(2)}</span>
                          </div>
                          <div>
                            <span style="text-decoration:line-through;color:#999;font-size:14px">‚Ç±${originalPrice.toFixed(2)}</span>
                          </div>
                          <div style="margin-top:8px;padding:6px;background:#fff5f5;border-radius:4px;font-size:12px;color:#ff6b6b;font-weight:600">
                            ‚ö° FLASH SALE
                          </div>
                        </div>
                      `;
                    }).join('');
                  }
                })
                .catch(err => console.error('Error loading flash sale products:', err));
            }
          }
        })
        .catch(error => console.error('Error loading flash sales:', error));
    }
    
=======
        // Load browse products
        loadBrowseProducts();
    });

>>>>>>> parent of 1c35c95 (malapit na mga bes)
    // Load featured products from API (for home section)
    function loadFeaturedProducts() {
      console.log('Loading featured products...');
      const featuredGrid = document.getElementById('featuredGrid');
      
      // Show loading state
      featuredGrid.innerHTML = '<div style="grid-column:1/-1;text-align:center;padding:40px;color:#999"><div style="display:inline-block;width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #0a0a0a;border-radius:50%;animation:spin 1s linear infinite"></div><p style="margin-top:16px">Loading products...</p></div>';
      
      fetch('/api/products?limit=8')
        .then(response => response.json())
        .then(data => {
<<<<<<< HEAD
          console.log('Featured products data:', data);
          if (data.success && data.products && data.products.length > 0) {
            const filtered = data.products.slice(0, 8);
            featuredGrid.innerHTML = filtered.map(product => {
              const hasSale = activeFlashSales[product.id];
              const originalPrice = parseFloat(product.price);
              const salePrice = hasSale ? parseFloat(hasSale.sale_price) : originalPrice;
              const discount = hasSale ? parseFloat(hasSale.discount_percentage) : 0;
              
              return `
                <article class="product" style="cursor:pointer;position:relative;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.1);transition:transform 0.2s,box-shadow 0.2s" onclick="window.location.href='/product/${product.id}'" onmouseover="this.style.transform='translateY(-4px)';this.style.boxShadow='0 4px 16px rgba(0,0,0,0.15)'" onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 2px 8px rgba(0,0,0,0.1)'">
                  ${hasSale ? `<div style="position:absolute;top:12px;left:12px;background:#ff6b6b;color:#fff;padding:8px 14px;border-radius:8px;font-weight:700;font-size:13px;z-index:2;box-shadow:0 2px 8px rgba(255,107,107,0.4)">‚ö° ${Math.round(discount)}% OFF</div>` : ''}
                  <div class="product-image" style="position:relative;width:100%;height:300px;overflow:hidden;background:#f5f5f5">
                    <img src="${product.image_url || 'https://images.unsplash.com/photo-1495121605193-b116b5b09f06?q=80&w=400&auto=format&fit=crop'}" alt="${product.name}" style="width:100%;height:100%;object-fit:cover;">
                  </div>
                  <div class="product-info" style="padding:16px">
                    <h3 style="margin:0 0 8px;font-size:16px;font-weight:500;color:#0a0a0a;min-height:44px;line-height:1.4">${product.name}</h3>
                    <div class="price" style="display:flex;align-items:center;gap:8px;flex-wrap:wrap">
                      ${hasSale ? `<span style="text-decoration:line-through;color:#999;font-size:14px">‚Ç±${originalPrice.toFixed(2)}</span>` : ''}
                      <span style="font-size:18px;font-weight:700;${hasSale ? 'color:#ff6b6b' : 'color:#0a0a0a'}">‚Ç±${salePrice.toFixed(2)}</span>
                    </div>
                  </div>
                </article>
              `;
            }).join('');
          } else {
            featuredGrid.innerHTML = '<div style="grid-column:1/-1;text-align:center;padding:60px 20px"><h3 style="margin:0 0 12px;color:#666">No Products Available</h3><p style="color:#999;margin:0">Check back soon for new arrivals!</p></div>';
=======
          if (data.success && data.products) {
            const featuredGrid = document.getElementById('featuredGrid');
            // Filter out products with ID 1 and 2
            const filtered = data.products.filter(p => p.id !== 1 && p.id !== 2).slice(0, 4);
            featuredGrid.innerHTML = filtered.map(product => `
              <article class="product" style="cursor:pointer" onclick="window.location.href='/product/${product.id}'">
                <div class="product-image">
                  <img src="${product.image_url || 'https://via.placeholder.com/400x500'}" alt="${product.name}" style="width:100%;height:100%;object-fit:cover;">
                </div>
                <div class="product-info">
                  <h3>${product.name}</h3>
                  <p class="price">‚Ç±${parseFloat(product.price).toFixed(2)}</p>
                </div>
              </article>
            `).join('');
>>>>>>> parent of 1c35c95 (malapit na mga bes)
          }
        })
        .catch(error => {
          console.error('Error loading featured products:', error);
          featuredGrid.innerHTML = '<div style="grid-column:1/-1;text-align:center;padding:60px 20px"><h3 style="margin:0 0 12px;color:#ef4444">Error Loading Products</h3><p style="color:#999;margin:0">Please refresh the page to try again.</p></div>';
        });
    }

    // Load browse products from API
    let allProducts = [];
    function loadBrowseProducts() {
      fetch('/api/products')
        .then(response => response.json())
        .then(data => {
          if (data.success && data.products) {
            // Filter out products with ID 1 and 2
            allProducts = data.products.filter(p => p.id !== 1 && p.id !== 2);
            displayProducts(allProducts);
          } else {
            document.getElementById('browseGrid').innerHTML = '<p style="color:#999;text-align:center;grid-column:1/-1;padding:40px">No products available</p>';
          }
        })
        .catch(error => {
          console.error('Error loading products:', error);
          document.getElementById('browseGrid').innerHTML = '<p style="color:#ef4444;text-align:center;grid-column:1/-1;padding:40px">Error loading products</p>';
        });
    }

    // Display products with HTML
    function displayProducts(products) {
      const browseGrid = document.getElementById('browseGrid');
      if (products.length === 0) {
        browseGrid.innerHTML = '<div style="grid-column:1/-1;text-align:center;padding:60px 20px"><h3 style="margin:0 0 12px;color:#666">No Products Available</h3><p style="color:#999;margin:0">Check back soon for new arrivals!</p></div>';
      } else {
<<<<<<< HEAD
        browseGrid.innerHTML = products.map(product => {
          const hasSale = activeFlashSales[product.id];
          const originalPrice = parseFloat(product.price);
          const salePrice = hasSale ? parseFloat(hasSale.sale_price) : originalPrice;
          const discount = hasSale ? parseFloat(hasSale.discount_percentage) : 0;
          
          return `
            <article class="product" style="cursor:pointer;position:relative;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.1);transition:transform 0.2s,box-shadow 0.2s" onclick="window.location.href='/product/${product.id}'" onmouseover="this.style.transform='translateY(-4px)';this.style.boxShadow='0 4px 16px rgba(0,0,0,0.15)'" onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 2px 8px rgba(0,0,0,0.1)'">
              ${hasSale ? `<div style="position:absolute;top:12px;left:12px;background:#ff6b6b;color:#fff;padding:8px 14px;border-radius:8px;font-weight:700;font-size:13px;z-index:2;box-shadow:0 2px 8px rgba(255,107,107,0.4)">‚ö° ${Math.round(discount)}% OFF</div>` : ''}
              <div class="product-image" style="position:relative;width:100%;height:300px;overflow:hidden;background:#f5f5f5">
                <img src="${product.image_url || 'https://images.unsplash.com/photo-1495121605193-b116b5b09f06?q=80&w=400&auto=format&fit=crop'}" alt="${product.name}" style="width:100%;height:100%;object-fit:cover">
              </div>
              <div class="product-info" style="padding:16px">
                <h3 style="margin:0 0 8px;font-size:16px;font-weight:500;color:#0a0a0a;min-height:44px;line-height:1.4">${product.name}</h3>
                <div class="price" style="display:flex;align-items:center;gap:8px;flex-wrap:wrap">
                  ${hasSale ? `<span style="text-decoration:line-through;color:#999;font-size:14px">‚Ç±${originalPrice.toFixed(2)}</span>` : ''}
                  <span style="font-size:18px;font-weight:700;${hasSale ? 'color:#ff6b6b' : 'color:#0a0a0a'}">‚Ç±${salePrice.toFixed(2)}</span>
                </div>
              </div>
            </article>
          `;
        }).join('');
=======
        browseGrid.innerHTML = products.map(product => `
          <article class="product" style="cursor:pointer" onclick="window.location.href='/product/${product.id}'">
            <div class="product-image">
              <img src="${product.image_url || 'https://via.placeholder.com/400x500'}" alt="${product.name}" style="width:100%;height:100%;object-fit:cover">
            </div>
            <div class="product-info">
              <h3>${product.name}</h3>
              <p class="price">‚Ç±${parseFloat(product.price).toFixed(2)}</p>
            </div>
          </article>
        `).join('');
>>>>>>> parent of 1c35c95 (malapit na mga bes)
      }
    }

    // Filter products by category
    async function filterByCategory(category) {
      // Update button styles
      document.querySelectorAll('.genre-filter').forEach(btn => {
        if (btn.dataset.category === category) {
          btn.style.background = '#0a0a0a';
          btn.style.color = '#fff';
          btn.style.borderColor = '#0a0a0a';
        } else {
          btn.style.background = '#fff';
          btn.style.color = '#0a0a0a';
          btn.style.borderColor = '#ddd';
        }
      });

      // Show loading state
      const browseGrid = document.getElementById('browseGrid');
      browseGrid.innerHTML = '<div style="grid-column:1/-1;text-align:center;padding:40px;color:#999"><div style="display:inline-block;width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #0a0a0a;border-radius:50%;animation:spin 1s linear infinite"></div><p style="margin-top:16px">Loading products...</p></div>';

      try {
        // Fetch products by category
        const url = category === 'all' ? '/api/products' : `/api/products?category=${category}`;
        const response = await fetch(url);
        const data = await response.json();
        
        if (data.success && data.products) {
          allProducts = data.products;
          displayProducts(data.products);
        } else {
          browseGrid.innerHTML = '<p style="color:#999;text-align:center;grid-column:1/-1;padding:40px">No products available in this category</p>';
        }
      } catch (error) {
        console.error('Error fetching products:', error);
        browseGrid.innerHTML = '<p style="color:#ef4444;text-align:center;grid-column:1/-1;padding:40px">Error loading products. Please try again.</p>';
      }
    }

    // Show product detail modal
    function showProductDetail(productId) {
      // Implementation for showing product detail
      console.log('Show product detail:', productId);
    }

    // Handle order tracking form submission
    function handleTrackOrder(event) {
      event.preventDefault();
      const orderNumber = document.getElementById('trackOrderNumber').value;
      const email = document.getElementById('trackEmail').value;
      
      fetch('/api/search-order', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          order_number: orderNumber,
          email: email
        })
      })
      .then(response => response.json())
      .then(data => {
        const resultDiv = document.getElementById('trackingResult');
        const resultContent = document.getElementById('trackingResultContent');
        
        if (data.success) {
          const order = data.order;
          resultContent.innerHTML = `
            <div style="display:grid;gap:12px">
              <div style="display:flex;justify-content:space-between">
                <span style="color:#666">Order Number:</span>
                <span style="font-weight:600">${order.order_number}</span>
              </div>
              <div style="display:flex;justify-content:space-between">
                <span style="color:#666">Status:</span>
                <span style="font-weight:600;color:#3b82f6">${order.status}</span>
              </div>
              <div style="display:flex;justify-content:space-between">
                <span style="color:#666">Total Amount:</span>
                <span style="font-weight:600">‚Ç±${parseFloat(order.total_amount).toFixed(2)}</span>
              </div>
              <div style="display:flex;justify-content:space-between">
                <span style="color:#666">Order Date:</span>
                <span style="font-weight:600">${new Date(order.created_at).toLocaleDateString()}</span>
              </div>
            </div>
          `;
          resultDiv.style.display = 'block';
          resultDiv.style.borderLeftColor = '#10b981';
          resultDiv.style.background = '#f0fdf4';
        } else {
          resultContent.innerHTML = `<p style="color:#ef4444;margin:0">${data.error || 'Order not found'}</p>`;
          resultDiv.style.display = 'block';
          resultDiv.style.borderLeftColor = '#ef4444';
          resultDiv.style.background = '#fef2f2';
        }
      })
      .catch(error => {
        console.error('Error:', error);
        document.getElementById('trackingResult').style.display = 'block';
        document.getElementById('trackingResultContent').innerHTML = '<p style="color:#ef4444;margin:0">Error tracking order. Please try again.</p>';
      });
    }

    // Load user's orders for "My Orders" section
    function loadMyOrders() {
      fetch('/api/user-orders-detailed')
        .then(response => response.json())
        .then(data => {
          if (data.success && data.orders && data.orders.length > 0) {
            const myOrdersDiv = document.getElementById('myOrdersList');
            if (myOrdersDiv) {
              myOrdersDiv.innerHTML = data.orders.map(order => {
                // Status colors for badges
                const statusColors = {
                  'pending': { bg: '#fef3c7', color: '#92400e', emoji: '‚è≥' },
                  'confirmed': { bg: '#dbeafe', color: '#1e40af', emoji: '‚úîÔ∏è' },
                  'processing': { bg: '#fed7aa', color: '#9a3412', emoji: 'üîÑ' },
                  'shipped': { bg: '#c7d2fe', color: '#3730a3', emoji: 'üì¶' },
                  'delivered': { bg: '#dcfce7', color: '#15803d', emoji: '‚úÖ' },
                  'cancelled': { bg: '#fee2e2', color: '#991b1b', emoji: '‚ùå' },
                  'returned': { bg: '#e9d5ff', color: '#6b21a8', emoji: '‚Ü©Ô∏è' }
                };
                
                const statusInfo = statusColors[order.status] || statusColors['pending'];
                
                return `
                  <div style="background:#fff;padding:20px;border-radius:8px;border:1px solid #e5e7eb">
                    <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:12px">
                      <div>
                        <h3 style="margin:0 0 4px;font-size:16px">Order #${order.order_number}</h3>
                        <p style="margin:0;color:#666;font-size:14px">${new Date(order.created_at).toLocaleDateString()} ‚Ä¢ ${order.item_count} item(s)</p>
                        ${order.store_name ? `<p style="margin:4px 0 0;color:#999;font-size:13px">from ${order.store_name}</p>` : ''}
                      </div>
                      <span style="padding:8px 14px;border-radius:6px;font-size:13px;font-weight:600;white-space:nowrap;background:${statusInfo.bg};color:${statusInfo.color}">
                        ${statusInfo.emoji} ${order.status.replace(/_/g, ' ').toUpperCase()}
                      </span>
                    </div>
                    
                    <div style="display:flex;justify-content:space-between;align-items:center;padding-top:12px;border-top:1px solid #f3f4f6;margin-top:12px">
                      <span style="color:#666">Total: <strong>‚Ç±${parseFloat(order.total_amount).toFixed(2)}</strong></span>
                      <a href="/order-confirmation/${order.order_number}" style="color:#0a0a0a;font-size:13px;text-decoration:underline;cursor:pointer">View Details ‚Üí</a>
                    </div>
                  </div>
                `;
              }).join('');
            }
            document.getElementById('myOrdersLink').style.display = 'inline';
            document.getElementById('myOrdersLinkSidebar').style.display = 'block';
          }
        })
        .catch(error => console.error('Error loading orders:', error));
    }

    // Rest of the JavaScript functions from index.html
    </script>
    <script src="{{ url_for('static', filename='js/script.js') }}?v=3"></script>
  </body>
</html>
